{"version":3,"sources":["src/ubuntu1804/index.js"],"names":["render","setTimeout","start","_ubuntu","wrapper","document","querySelector","password","signIn","cancel","hint","timeModal","loginScreen","addEventListener","submit","clear","key","style","animation","offsetWidth","textContent","value","length","setIdleTimer","idleTimer","clearTimeout","onActive","openTimeModal","e","console","log","removeEventListener","closeTimeModal","timeInterval","setTime","setInterval","blur","transform","focus","time","date","now","Date","formatDate","getDayStr","getDay","getMonthStr","getMonth","getDate","clearInterval","d","split","m","h","getHours","getMinutes"],"mappings":"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","file":"ubuntu1804.6814eb3a.map","sourceRoot":"..","sourcesContent":["import _ubuntu from './ubuntu1804.pug';\nimport './ubuntu1804.scss';\n\nexport const render = () => {\n  setTimeout(start);\n  return _ubuntu;\n};\n\nfunction start() {\n  const wrapper = document.querySelector('.ubuntu1804-wrapper');\n\n  const password = wrapper.querySelector('#password');\n  const signIn = wrapper.querySelector('#sign-in');\n  const cancel = wrapper.querySelector('#cancel');\n  const hint = wrapper.querySelector('.hint');\n  const timeModal = wrapper.querySelector('.ubuntu1804-time-modal');\n  const loginScreen = wrapper.querySelector('.ubuntu1804-login-container');\n\n  password.addEventListener('keydown', submit);\n  signIn.addEventListener('click', submit);\n  cancel.addEventListener('click', clear);\n  function submit({ key }) {\n    if (key && key !== 'Enter') return;\n    hint.style.animation = '';\n    // a magic for replaying animation\n    void hint.offsetWidth;\n    hint.textContent = password.value.length\n      ? 'Wrong password.'\n      : 'You must enter a password!';\n    hint.style.animation = 'timeout 1.8s';\n  }\n  function clear() {\n    password.value = '';\n  }\n  password.addEventListener('mousemove', setIdleTimer);\n  document.addEventListener('keydown', setIdleTimer);\n  loginScreen.addEventListener('mousedown', setIdleTimer);\n\n  let idleTimer = null;\n  setIdleTimer();\n  function setIdleTimer() {\n    clearTimeout(idleTimer);\n    idleTimer = setTimeout(function() {\n      try {\n        timeModal.addEventListener('mousedown', onActive);\n        document.addEventListener('keydown', onActive);\n        openTimeModal();\n      } catch (e) {\n        console.log(e);\n        wrapper.removeEventListener('mousemove', setIdleTimer);\n        document.removeEventListener('keydown', setIdleTimer);\n        loginScreen.removeEventListener('mousedown', setIdleTimer);\n      }\n    }, 6000);\n  }\n  function onActive() {\n    setIdleTimer();\n    closeTimeModal();\n    timeModal.removeEventListener('mousedown', onActive);\n    document.removeEventListener('keydown', onActive);\n  }\n\n  let timeInterval = null;\n  setTime();\n  timeInterval = setInterval(setTime, 1000);\n  function openTimeModal() {\n    password.blur();\n    timeModal.style.transform = 'translateY(0%)';\n  }\n  function closeTimeModal() {\n    password.focus();\n    timeModal.style.transform = 'translateY(-100%)';\n  }\n  function setTime() {\n    try {\n      const time = timeModal.querySelector('.time');\n      const date = timeModal.querySelector('.date');\n      const now = new Date();\n      time.textContent = formatDate(now);\n      date.textContent = `${getDayStr(now.getDay())}, ${getMonthStr(\n        now.getMonth(),\n      )} ${now.getDate()}`;\n    } catch (e) {\n      console.log(e);\n      clearInterval(timeInterval);\n    }\n  }\n}\n\nfunction getDayStr(d) {\n  return 'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',')[\n    d\n  ];\n}\n\nfunction getMonthStr(m) {\n  return 'January,February,March,April,May,June,July,August,September,October,November,December'.split(\n    ',',\n  )[m];\n}\n\nfunction formatDate(d) {\n  let h = d.getHours();\n  let m = d.getMinutes();\n  h = (h < 10 ? '0' : '') + h;\n  m = (m < 10 ? '0' : '') + m;\n  return `${h}:${m}`;\n}\n"]}