{"version":3,"sources":["src/ubuntu1804/index.js"],"names":["render","container","innerHTML","_ubuntu","start","wrapper","document","querySelector","password","signIn","cancel","hint","timeModal","loginScreen","addEventListener","submit","clear","key","style","animation","offsetWidth","textContent","value","length","setIdleTimer","idleTimer","clearTimeout","setTimeout","onActive","openTimeModal","e","console","log","removeEventListener","closeTimeModal","timeInterval","setTime","setInterval","blur","transform","focus","time","date","now","Date","formatDate","getDayStr","getDay","getMonthStr","getMonth","getDate","clearInterval","d","split","m","h","getHours","getMinutes"],"mappings":"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","file":"ubuntu1804.6814eb3a.map","sourceRoot":"..","sourcesContent":["import _ubuntu from \"./ubuntu1804.pug\";\r\nimport \"./ubuntu1804.scss\";\r\n\r\nexport const render = container => {\r\n  container.innerHTML = _ubuntu;\r\n  start();\r\n};\r\n\r\nfunction start() {\r\n  const wrapper = document.querySelector(\".ubuntu1804-wrapper\");\r\n\r\n  const password = wrapper.querySelector(\"#password\");\r\n  const signIn = wrapper.querySelector(\"#sign-in\");\r\n  const cancel = wrapper.querySelector(\"#cancel\");\r\n  const hint = wrapper.querySelector(\".hint\");\r\n  const timeModal = wrapper.querySelector(\".ubuntu1804-time-modal\");\r\n  const loginScreen = wrapper.querySelector(\".ubuntu1804-login-container\");\r\n\r\n  password.addEventListener(\"keydown\", submit);\r\n  signIn.addEventListener(\"click\", submit);\r\n  cancel.addEventListener(\"click\", clear);\r\n  function submit({ key }) {\r\n    if (key && key !== \"Enter\") return;\r\n    hint.style.animation = \"\";\r\n    // a magic for replaying animation\r\n    void hint.offsetWidth;\r\n    hint.textContent = password.value.length\r\n      ? \"Wrong password.\"\r\n      : \"You must enter a password!\";\r\n    hint.style.animation = \"timeout 1.8s\";\r\n  }\r\n  function clear() {\r\n    password.value = \"\";\r\n  }\r\n  password.addEventListener(\"mousemove\", setIdleTimer);\r\n  document.addEventListener(\"keydown\", setIdleTimer);\r\n  loginScreen.addEventListener(\"mousedown\", setIdleTimer);\r\n\r\n  let idleTimer = null;\r\n  setIdleTimer();\r\n  function setIdleTimer() {\r\n    clearTimeout(idleTimer);\r\n    idleTimer = setTimeout(function() {\r\n      try {\r\n        timeModal.addEventListener(\"mousedown\", onActive);\r\n        document.addEventListener(\"keydown\", onActive);\r\n        openTimeModal();\r\n      } catch (e) {\r\n        console.log(e);\r\n        wrapper.removeEventListener(\"mousemove\", setIdleTimer);\r\n        document.removeEventListener(\"keydown\", setIdleTimer);\r\n        loginScreen.removeEventListener(\"mousedown\", setIdleTimer);\r\n      }\r\n    }, 6000);\r\n  }\r\n  function onActive() {\r\n    setIdleTimer();\r\n    closeTimeModal();\r\n    timeModal.removeEventListener(\"mousedown\", onActive);\r\n    document.removeEventListener(\"keydown\", onActive);\r\n  }\r\n\r\n  let timeInterval = null;\r\n  setTime();\r\n  timeInterval = setInterval(setTime, 1000);\r\n  function openTimeModal() {\r\n    password.blur();\r\n    timeModal.style.transform = \"translateY(0%)\";\r\n  }\r\n  function closeTimeModal() {\r\n    password.focus();\r\n    timeModal.style.transform = \"translateY(-100%)\";\r\n  }\r\n  function setTime() {\r\n    try {\r\n      const time = timeModal.querySelector(\".time\");\r\n      const date = timeModal.querySelector(\".date\");\r\n      const now = new Date();\r\n      time.textContent = formatDate(now);\r\n      date.textContent = `${getDayStr(now.getDay())}, ${getMonthStr(\r\n        now.getMonth()\r\n      )} ${now.getDate()}`;\r\n    } catch (e) {\r\n      console.log(e);\r\n      clearInterval(timeInterval);\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDayStr(d) {\r\n  return \"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday\".split(\",\")[\r\n    d\r\n  ];\r\n}\r\n\r\nfunction getMonthStr(m) {\r\n  return \"January,February,March,April,May,June,July,August,September,October,November,December\".split(\r\n    \",\"\r\n  )[m];\r\n}\r\n\r\nfunction formatDate(d) {\r\n  let h = d.getHours();\r\n  let m = d.getMinutes();\r\n  h = (h < 10 ? \"0\" : \"\") + h;\r\n  m = (m < 10 ? \"0\" : \"\") + m;\r\n  return `${h}:${m}`;\r\n}\r\n"]}