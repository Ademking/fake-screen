{"version":3,"sources":["src/ubuntu1804/index.js"],"names":["render","ubuntu","setTimeout","start","wrapper","document","querySelector","password","signIn","cancel","hint","submit","key","style","animation","offsetWidth","textContent","value","length","addEventListener","clear","setIdleTimer","timeModal","idleTimer","clearTimeout","onActive","transform","e","console","log","removeEventListener","includes","timeInterval","setTime","time","date","now","Date","formatDate","getDayStr","getDay","getMonthStr","getMonth","getDate","clearInterval","setInterval","d","split","m","h","getHours","getMinutes"],"mappings":";;;AAsGC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EAtGD,IAAA,EAAA,EAAA,QAAA,qBAsGC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GArGD,QAAA,qBAEO,IAAMA,EAAS,WAEbC,OADPC,WAAWC,GACJF,EAAP,SAGF,SAASE,IACDC,IAAAA,EAAUC,SAASC,cAAc,uBAEjCC,EAAWH,EAAQE,cAAc,aACjCE,EAASJ,EAAQE,cAAc,YAC/BG,EAASL,EAAQE,cAAc,WAC/BI,EAAON,EAAQE,cAAc,SAI1BK,SAAAA,EAAgB,GAAPC,IAAAA,EAAAA,EAAAA,IACZA,GAAe,UAARA,IACXF,EAAKG,MAAMC,UAAY,GAElBJ,EAAKK,YACVL,EAAKM,YAAcT,EAASU,MAAMC,OAC9B,kBACA,6BACJR,EAAKG,MAAMC,UAAY,gBAXzBP,EAASY,iBAAiB,UAAWR,GACrCH,EAAOW,iBAAiB,QAASR,GACjCF,EAAOU,iBAAiB,QAWfC,WACPb,EAASU,MAAQ,KAEnBV,EAASY,iBAAiB,YAAaE,GACvChB,SAASc,iBAAiB,UAAWE,GAC/BC,IAAAA,EAAYlB,EAAQE,cAAc,0BAEpCiB,EAAY,KAEPF,SAAAA,IACPG,aAAaD,GACbA,EAAYrB,WAAW,WACjB,IACFoB,EAAUH,iBAAiB,YAAaM,GACxCpB,SAASc,iBAAiB,UAAWM,GAqBzCH,EAAUT,MAAMa,UAAY,iBAnBxB,MAAOC,GACPC,QAAQC,IAAIF,GACZvB,EAAQ0B,oBAAoB,YAAaT,GACzChB,SAASyB,oBAAoB,UAAWT,KAEzC,KAEII,SAAAA,EAAkB,GAAPb,IAAAA,EAAAA,EAAAA,IACdA,IAAQ,CAAC,QAAS,KAAKmB,SAASnB,KACpCS,IAaAC,EAAUT,MAAMa,UAAY,oBAX5BJ,EAAUQ,oBAAoB,YAAaL,GAC3CpB,SAASyB,oBAAoB,UAAWL,IApB1CJ,IAuBIW,IAAAA,EAAe,KASVC,SAAAA,IACH,IACIC,IAAAA,EAAOZ,EAAUhB,cAAc,SAC/B6B,EAAOb,EAAUhB,cAAc,SAC/B8B,EAAM,IAAIC,KAChBH,EAAKlB,YAAcsB,EAAWF,GAC9BD,EAAKnB,YAAiBuB,GAAAA,OAAAA,EAAUH,EAAII,UAAcC,MAAAA,OAAAA,EAChDL,EAAIM,YACDN,KAAAA,OAAAA,EAAIO,WACT,MAAOhB,GACPC,QAAQC,IAAIF,GACZiB,cAAcZ,IAnBlBC,IACAD,EAAea,YAAYZ,EAAS,KAuBtC,SAASM,EAAUO,GACV,MAAA,2DAA2DC,MAAM,KACtED,GAIJ,SAASL,EAAYO,GACZ,MAAA,wFAAwFD,MAC7F,KACAC,GAGJ,SAASV,EAAWQ,GACdG,IAAAA,EAAIH,EAAEI,WACNF,EAAIF,EAAEK,aAGAF,OADVD,GAAKA,EAAI,GAAK,IAAM,IAAMA,EAChBC,GAAAA,OAFVA,GAAKA,EAAI,GAAK,IAAM,IAAMA,EAEXD,KAAAA,OAAAA,GAChB,QAAA,OAAA","file":"ubuntu1804.a61192a6.map","sourceRoot":"..","sourcesContent":["import ubuntu from \"./ubuntu1804.pug\";\r\nimport \"./ubuntu1804.scss\";\r\n\r\nexport const render = () => {\r\n  setTimeout(start);\r\n  return ubuntu;\r\n};\r\n\r\nfunction start() {\r\n  const wrapper = document.querySelector(\".ubuntu1804-wrapper\");\r\n\r\n  const password = wrapper.querySelector(\"#password\");\r\n  const signIn = wrapper.querySelector(\"#sign-in\");\r\n  const cancel = wrapper.querySelector(\"#cancel\");\r\n  const hint = wrapper.querySelector(\".hint\");\r\n  password.addEventListener(\"keydown\", submit);\r\n  signIn.addEventListener(\"click\", submit);\r\n  cancel.addEventListener(\"click\", clear);\r\n  function submit({ key }) {\r\n    if (key && key !== \"Enter\") return;\r\n    hint.style.animation = \"\";\r\n    // a magic for replaying animation\r\n    void hint.offsetWidth;\r\n    hint.textContent = password.value.length\r\n      ? \"Wrong password.\"\r\n      : \"You must enter a password!\";\r\n    hint.style.animation = \"timeout 1.6s\";\r\n  }\r\n  function clear() {\r\n    password.value = \"\";\r\n  }\r\n  password.addEventListener(\"mousemove\", setIdleTimer);\r\n  document.addEventListener(\"keydown\", setIdleTimer);\r\n  const timeModal = wrapper.querySelector(\".ubuntu1804-time-modal\");\r\n\r\n  let idleTimer = null;\r\n  setIdleTimer();\r\n  function setIdleTimer() {\r\n    clearTimeout(idleTimer);\r\n    idleTimer = setTimeout(function() {\r\n      try {\r\n        timeModal.addEventListener(\"mousedown\", onActive);\r\n        document.addEventListener(\"keydown\", onActive);\r\n        openTimeModal();\r\n      } catch (e) {\r\n        console.log(e);\r\n        wrapper.removeEventListener(\"mousemove\", setIdleTimer);\r\n        document.removeEventListener(\"keydown\", setIdleTimer);\r\n      }\r\n    }, 6000);\r\n  }\r\n  function onActive({ key }) {\r\n    if (key && ![\"Enter\", \" \"].includes(key)) return;\r\n    setIdleTimer();\r\n    closeTimeModal();\r\n    timeModal.removeEventListener(\"mousedown\", onActive);\r\n    document.removeEventListener(\"keydown\", onActive);\r\n  }\r\n\r\n  let timeInterval = null;\r\n  setTime();\r\n  timeInterval = setInterval(setTime, 1000);\r\n  function openTimeModal() {\r\n    timeModal.style.transform = \"translateY(0%)\";\r\n  }\r\n  function closeTimeModal() {\r\n    timeModal.style.transform = \"translateY(-100%)\";\r\n  }\r\n  function setTime() {\r\n    try {\r\n      const time = timeModal.querySelector(\".time\");\r\n      const date = timeModal.querySelector(\".date\");\r\n      const now = new Date();\r\n      time.textContent = formatDate(now);\r\n      date.textContent = `${getDayStr(now.getDay())}, ${getMonthStr(\r\n        now.getMonth()\r\n      )} ${now.getDate()}`;\r\n    } catch (e) {\r\n      console.log(e);\r\n      clearInterval(timeInterval);\r\n    }\r\n  }\r\n}\r\n\r\nfunction getDayStr(d) {\r\n  return \"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday\".split(\",\")[\r\n    d\r\n  ];\r\n}\r\n\r\nfunction getMonthStr(m) {\r\n  return \"January,February,March,April,May,June,July,August,September,October,November,December\".split(\r\n    \",\"\r\n  )[m];\r\n}\r\n\r\nfunction formatDate(d) {\r\n  let h = d.getHours();\r\n  let m = d.getMinutes();\r\n  h = (h < 10 ? \"0\" : \"\") + h;\r\n  m = (m < 10 ? \"0\" : \"\") + m;\r\n  return `${h}:${m}`;\r\n}\r\n"]}