{"version":3,"sources":["node_modules/better-scroll/dist/bscroll.esm.js","src/mcdonalds/index.js"],"names":["slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","length","err","Array","isArray","Object","TypeError","toConsumableArray","arr2","from","eventMixin","BScroll","prototype","on","type","fn","context","arguments","_events","once","magic","off","apply","count","trigger","events","len","eventsCopy","concat","event","_event","slice","call","inBrowser","window","ua","navigator","userAgent","toLowerCase","isWeChatDevTools","test","isAndroid","indexOf","getNow","performance","now","timing","navigationStart","Date","extend","target","_len","rest","_key","source","key","isUndef","v","getDistance","x","y","Math","sqrt","elementStyle","document","createElement","style","vendor","transformNames","webkit","Moz","O","ms","standard","prefixStyle","charAt","toUpperCase","substr","addEvent","el","capture","addEventListener","passive","removeEvent","removeEventListener","offset","left","top","offsetLeft","offsetTop","offsetParent","offsetToBody","rect","getBoundingClientRect","pageXOffset","pageYOffset","cssVendor","transform","transition","hasPerspective","hasTouch","hasTransform","hasTransition","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","transitionEnd","TOUCH_EVENT","MOUSE_EVENT","eventType","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","getRect","SVGElement","width","height","offsetWidth","offsetHeight","preventDefaultException","exceptions","tap","e","eventName","ev","createEvent","initEvent","pageX","pageY","dispatchEvent","click","eventSource","changedTouches","posSrc","screenX","screenY","clientX","clientY","bubbles","cancelable","MouseEvent","forwardedTouchEvent","_constructed","dblclick","prepend","firstChild","before","appendChild","parentNode","insertBefore","removeChild","child","DEFAULT_OPTIONS","startX","startY","scrollX","scrollY","freeScroll","directionLockThreshold","eventPassthrough","bounce","bounceTime","momentum","momentumLimitTime","momentumLimitDistance","swipeTime","swipeBounceTime","deceleration","flickLimitTime","flickLimitDistance","resizePolling","probeType","preventDefault","tagName","HWCompositing","useTransition","useTransform","bindToWrapper","disableMouse","disableTouch","observeDOM","autoBlur","wheel","snap","scrollbar","pullDownRefresh","pullUpLoad","mouseWheel","stopPropagation","zoom","infinity","initMixin","_init","options","_handleOptions","directionX","directionY","setScale","_addDOMEvents","_initExtFeatures","_watchTransition","_initDOMObserver","_handleAutoBlur","refresh","scrollTo","enable","scale","lastScale","translateZ","eventOperation","_handleDOMEvents","_removeDOMEvents","wrapper","scroller","_initSnap","_initScrollbar","_initPullUp","_initPullDown","_initWheel","_initMouseWheel","_initZoom","_initInfinite","defineProperty","me","isInTransition","get","set","newVal","children","pointerEvents","pulling","activeElement","blur","_this","MutationObserver","timer","observer","mutations","_shouldNotRefresh","immediateRefresh","deferredRefresh","mutation","clearTimeout","setTimeout","config","attributes","childList","subtree","observe","disconnect","_checkDOMUpdate","outsideBoundaries","minScrollX","maxScrollX","minScrollY","maxScrollY","stopFromTransition","scrollerRect","oldWidth","oldHeight","check","destroyed","newWidth","newHeight","_this2","handleEvent","_start","touches","_zoomStart","_zoom","_move","scaled","_zoomEnd","_end","_resize","_transitionEnd","enabled","_onMouseWheel","isWrapperStatic","getComputedStyle","position","wrapperRect","wrapperWidth","wrapperHeight","scrollerWidth","round","scrollerHeight","relativeX","relativeY","items","itemHeight","selectedIndex","hasHorizontalScroll","hasVerticalScroll","endTime","wrapperOffset","resetPosition","disable","ease","swipe","t","swipeBounce","current","start","time","lowerMargin","upperMargin","wrapperSize","distance","speed","abs","duration","rate","destination","max","min","DEFAULT_INTERVAL","noop","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","callback","interval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","DIRECTION_UP","DIRECTION_DOWN","DIRECTION_LEFT","DIRECTION_RIGHT","PROBE_DEBOUNCE","PROBE_REALTIME","warn","msg","console","error","assert","condition","Error","coreMixin","_eventType","button","initiated","moved","distX","distY","movingDirectionX","movingDirectionY","directionLocked","_transitionTime","startTime","stop","point","absStartX","absStartY","pointX","pointY","deltaX","deltaY","absDistX","absDistY","timestamp","newX","newY","bottom","right","_translate","scrollLeft","documentElement","body","scrollTop","pX","pY","clientWidth","clientHeight","_checkPullDown","_checkClick","flick","momentumX","momentumY","adjustTime","easing","_nearestSnap","currentPage","snapSpeed","preventClick","classList","contains","wheelWrapperClass","index","_offset","scrollToElement","_dblclick","dblclickTrigged","lastClickTime","_dblclick$delay","delay","resizeTimeout","_startProbe","probeTimer","probe","pos","getComputedPosition","scrollerStyle","indicators","transitionTime","_transitionTimingFunction","_i2","needReset","_options$wheel$rotate","rotate","deg","_i3","updatePosition","_animate","destX","destY","easingFn","startScale","destScale","destTime","step","isAnimating","newScale","animateTimer","scrollBy","_reflow","offsetX","offsetY","nodeType","querySelector","wheelItemClass","easeing","roundX","roundY","matrix","split","replace","destroy","snapMixin","loop","cloneNode","querySelectorAll","pages","stepX","stepY","cx","cy","l","m","n","_checkSnapLoop","initPageX","_loopX","initPageY","_loopY","_goToPage","snapThreshold","threshold","snapThresholdX","snapThresholdY","listenFlick","_children","posX","posY","goToPage","prev","getCurrentPage","wheelMixin","wheelTo","getSelectedIndex","INDICATOR_MIN_LEN","scrollbarMixin","_options$scrollbar","_options$scrollbar$fa","fade","_options$scrollbar$in","interactive","indicator","createScrollbar","direction","_insertScrollBar","Indicator","_removeScrollBars","cssText","className","wrapperStyle","indicatorStyle","visible","opacity","sizeRatioX","sizeRatioY","maxPosX","maxPosY","_shouldShow","_calculate","hold","fadeTimeout","indicatorHeight","_height","indicatorWidth","_width","lastPointX","lastPointY","_handleMoveEvents","_pos","snapOption","_snapOption$easing","display","pullDownMixin","_options$pullDownRefr","_options$pullDownRefr2","_options$pullDownRefr3","finishPullDown","openPullDown","closePullDown","pullUpMixin","pullupWatching","_watchPullUp","_checkToEnd","_options$pullUpLoad$t","finishPullUp","openPullUp","closePullUp","mouseWheelMixin","_handleMouseWheelEvent","mouseWheelTimer","mouseWheelEndTimer","firstWheelOpreation","_options$mouseWheel","_options$mouseWheel$s","_options$mouseWheel$i","invert","_options$mouseWheel$e","easeTime","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","detail","needTriggerEnd","zoomMixin","_options$zoom","_options$zoom$start","_options$zoom$min","_options$zoom$max","_zoomTo","originX","originY","zoomTo","_offsetToBody","firstFinger","secondFinger","startDistance","_offsetToBody2","_options$zoom2","_options$zoom2$min","_options$zoom2$max","pow","_options$zoom3","_options$zoom3$min","_options$zoom3$max","RUNWAY_ITEMS","RUNWAY_ITEMS_OPPOSITE","ANIMATION_DURATION_MS","DEFAULT_SCROLL_RUNWAY","infiniteMixin","infiniteScroller","InfiniteScroller","isTombstoneNode","node","createTombstone","fetch","render","firstAttachedItem","lastAttachedItem","anchorScrollTop","anchorItem","tombstoneHeight","tombstoneWidth","tombstones","tombstonesAnimationHandlers","loadedItems","requestInProgress","hasMore","wrapperEl","scrollerEl","onScroll","onResize","_onResizeHandler","forEach","handler","item","delta","_calculateAnchoredItem","lastScreenItem","end","fill","maybeRequestContent","tombstone","attachContent","_this3","itemsNeeded","then","addContent","tombstoneLen","_removeTombstones","curPos","_fixScrollPosition","_setupAnimations","_addItem","data","unusedNodes","_collectUnusedNodes","tombstoneAnimations","_createDOMNodes","_cleanupUnusedNodes","_cacheNodeSize","resetMore","markIndex","itemLen","currentNode","currentData","splice","zIndex","pop","_getTombStone","isTombstone","_this4","animation","_animation","tombstoneNode","tombstoneAnimationsHandler","_animation2","initialAnchor","ceil","floor","Version","mcdonalds","scroll","couponPage","coupons","header","hamburgerIcon","nextHamburgerIcon","title","nextTitle","how","nextHow","hamburger","status","exp","couponFooter","couponFooterText","onclick","handleExchange","openCouponPage","textContent","setExp","onExchange","date","getFullYear","getMonth","getDate","innerHTML","clock","clockB","expTime","setMinutes","getMinutes","countDowner","CountDowner","getLast","formatFromCB","timeArray","toFixStr","onSecond","exchangedExps","exchangeExp","onStop","closeCouponPage"],"mappings":"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","file":"mcdonalds.53ad66b9.map","sourceRoot":"..","sourcesContent":["/*!\n * better-normal-scroll v1.13.2\n * (c) 2016-2018 ustbhuangyi\n * Released under the MIT License.\n */\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\nfunction eventMixin(BScroll) {\n  BScroll.prototype.on = function (type, fn) {\n    var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n\n    if (!this._events[type]) {\n      this._events[type] = [];\n    }\n\n    this._events[type].push([fn, context]);\n  };\n\n  BScroll.prototype.once = function (type, fn) {\n    var context = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this;\n\n    function magic() {\n      this.off(type, magic);\n\n      fn.apply(context, arguments);\n    }\n    // To expose the corresponding function method in order to execute the off method\n    magic.fn = fn;\n\n    this.on(type, magic);\n  };\n\n  BScroll.prototype.off = function (type, fn) {\n    var _events = this._events[type];\n    if (!_events) {\n      return;\n    }\n\n    var count = _events.length;\n    while (count--) {\n      if (_events[count][0] === fn || _events[count][0] && _events[count][0].fn === fn) {\n        _events[count][0] = undefined;\n      }\n    }\n  };\n\n  BScroll.prototype.trigger = function (type) {\n    var events = this._events[type];\n    if (!events) {\n      return;\n    }\n\n    var len = events.length;\n    var eventsCopy = [].concat(toConsumableArray(events));\n    for (var i = 0; i < len; i++) {\n      var event = eventsCopy[i];\n\n      var _event = slicedToArray(event, 2),\n          fn = _event[0],\n          context = _event[1];\n\n      if (fn) {\n        fn.apply(context, [].slice.call(arguments, 1));\n      }\n    }\n  };\n}\n\n// ssr support\nvar inBrowser = typeof window !== 'undefined';\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\nvar isWeChatDevTools = ua && /wechatdevtools/.test(ua);\nvar isAndroid = ua && ua.indexOf('android') > 0;\n\nfunction getNow() {\n  return window.performance && window.performance.now ? window.performance.now() + window.performance.timing.navigationStart : +new Date();\n}\n\nfunction extend(target) {\n  for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    rest[_key - 1] = arguments[_key];\n  }\n\n  for (var i = 0; i < rest.length; i++) {\n    var source = rest[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nfunction isUndef(v) {\n  return v === undefined || v === null;\n}\n\nfunction getDistance(x, y) {\n  return Math.sqrt(x * x + y * y);\n}\n\nvar elementStyle = inBrowser && document.createElement('div').style;\n\nvar vendor = function () {\n  if (!inBrowser) {\n    return false;\n  }\n  var transformNames = {\n    webkit: 'webkitTransform',\n    Moz: 'MozTransform',\n    O: 'OTransform',\n    ms: 'msTransform',\n    standard: 'transform'\n  };\n\n  for (var key in transformNames) {\n    if (elementStyle[transformNames[key]] !== undefined) {\n      return key;\n    }\n  }\n\n  return false;\n}();\n\nfunction prefixStyle(style) {\n  if (vendor === false) {\n    return false;\n  }\n\n  if (vendor === 'standard') {\n    if (style === 'transitionEnd') {\n      return 'transitionend';\n    }\n    return style;\n  }\n\n  return vendor + style.charAt(0).toUpperCase() + style.substr(1);\n}\n\nfunction addEvent(el, type, fn, capture) {\n  el.addEventListener(type, fn, { passive: false, capture: !!capture });\n}\n\nfunction removeEvent(el, type, fn, capture) {\n  el.removeEventListener(type, fn, { passive: false, capture: !!capture });\n}\n\nfunction offset(el) {\n  var left = 0;\n  var top = 0;\n\n  while (el) {\n    left -= el.offsetLeft;\n    top -= el.offsetTop;\n    el = el.offsetParent;\n  }\n\n  return {\n    left: left,\n    top: top\n  };\n}\n\nfunction offsetToBody(el) {\n  var rect = el.getBoundingClientRect();\n\n  return {\n    left: -(rect.left + window.pageXOffset),\n    top: -(rect.top + window.pageYOffset)\n  };\n}\n\nvar cssVendor = vendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\n\nvar transform = prefixStyle('transform');\nvar transition = prefixStyle('transition');\n\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle;\n// fix issue #361\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\nvar hasTransform = transform !== false;\nvar hasTransition = inBrowser && transition in elementStyle;\n\nvar style = {\n  transform: transform,\n  transition: transition,\n  transitionTimingFunction: prefixStyle('transitionTimingFunction'),\n  transitionDuration: prefixStyle('transitionDuration'),\n  transitionDelay: prefixStyle('transitionDelay'),\n  transformOrigin: prefixStyle('transformOrigin'),\n  transitionEnd: prefixStyle('transitionEnd')\n};\n\nvar TOUCH_EVENT = 1;\nvar MOUSE_EVENT = 2;\n\nvar eventType = {\n  touchstart: TOUCH_EVENT,\n  touchmove: TOUCH_EVENT,\n  touchend: TOUCH_EVENT,\n\n  mousedown: MOUSE_EVENT,\n  mousemove: MOUSE_EVENT,\n  mouseup: MOUSE_EVENT\n};\n\nfunction getRect(el) {\n  if (el instanceof window.SVGElement) {\n    var rect = el.getBoundingClientRect();\n    return {\n      top: rect.top,\n      left: rect.left,\n      width: rect.width,\n      height: rect.height\n    };\n  } else {\n    return {\n      top: el.offsetTop,\n      left: el.offsetLeft,\n      width: el.offsetWidth,\n      height: el.offsetHeight\n    };\n  }\n}\n\nfunction preventDefaultException(el, exceptions) {\n  for (var i in exceptions) {\n    if (exceptions[i].test(el[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction tap(e, eventName) {\n  var ev = document.createEvent('Event');\n  ev.initEvent(eventName, true, true);\n  ev.pageX = e.pageX;\n  ev.pageY = e.pageY;\n  e.target.dispatchEvent(ev);\n}\n\nfunction click(e) {\n  var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'click';\n\n  var eventSource = void 0;\n  if (e.type === 'mouseup' || e.type === 'mousecancel') {\n    eventSource = e;\n  } else if (e.type === 'touchend' || e.type === 'touchcancel') {\n    eventSource = e.changedTouches[0];\n  }\n  var posSrc = {};\n  if (eventSource) {\n    posSrc.screenX = eventSource.screenX || 0;\n    posSrc.screenY = eventSource.screenY || 0;\n    posSrc.clientX = eventSource.clientX || 0;\n    posSrc.clientY = eventSource.clientY || 0;\n  }\n  var ev = void 0;\n  var bubbles = true;\n  var cancelable = true;\n  if (typeof MouseEvent !== 'undefined') {\n    try {\n      ev = new MouseEvent(event, extend({\n        bubbles: bubbles,\n        cancelable: cancelable\n      }, posSrc));\n    } catch (e) {\n      createEvent();\n    }\n  } else {\n    createEvent();\n  }\n\n  function createEvent() {\n    ev = document.createEvent('Event');\n    ev.initEvent(event, bubbles, cancelable);\n    extend(ev, posSrc);\n  }\n\n  // forwardedTouchEvent set to true in case of the conflict with fastclick\n  ev.forwardedTouchEvent = true;\n  ev._constructed = true;\n  e.target.dispatchEvent(ev);\n}\n\nfunction dblclick(e) {\n  click(e, 'dblclick');\n}\n\nfunction prepend(el, target) {\n  if (target.firstChild) {\n    before(el, target.firstChild);\n  } else {\n    target.appendChild(el);\n  }\n}\n\nfunction before(el, target) {\n  target.parentNode.insertBefore(el, target);\n}\n\nfunction removeChild(el, child) {\n  el.removeChild(child);\n}\n\nvar DEFAULT_OPTIONS = {\n  startX: 0,\n  startY: 0,\n  scrollX: false,\n  scrollY: true,\n  freeScroll: false,\n  directionLockThreshold: 5,\n  eventPassthrough: '',\n  click: false,\n  tap: false,\n  /**\n   * support any side\n   * bounce: {\n   *   top: true,\n   *   bottom: true,\n   *   left: true,\n   *   right: true\n   * }\n   */\n  bounce: true,\n  bounceTime: 800,\n  momentum: true,\n  momentumLimitTime: 300,\n  momentumLimitDistance: 15,\n  swipeTime: 2500,\n  swipeBounceTime: 500,\n  deceleration: 0.0015,\n  flickLimitTime: 200,\n  flickLimitDistance: 100,\n  resizePolling: 60,\n  probeType: 0,\n  preventDefault: true,\n  preventDefaultException: {\n    tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/\n  },\n  HWCompositing: true,\n  useTransition: true,\n  useTransform: true,\n  bindToWrapper: false,\n  disableMouse: hasTouch,\n  disableTouch: !hasTouch,\n  observeDOM: true,\n  autoBlur: true,\n  /**\n   * for picker\n   * wheel: {\n   *   selectedIndex: 0,\n   *   rotate: 25,\n   *   adjustTime: 400\n   *   wheelWrapperClass: 'wheel-scroll',\n   *   wheelItemClass: 'wheel-item'\n   * }\n   */\n  wheel: false,\n  /**\n   * for slide\n   * snap: {\n   *   loop: false,\n   *   el: domEl,\n   *   threshold: 0.1,\n   *   stepX: 100,\n   *   stepY: 100,\n   *   speed: 400,\n   *   easing: {\n   *     style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n   *     fn: function (t) {\n   *       return t * (2 - t)\n   *     }\n   *   }\n   *   listenFlick: true\n   * }\n   */\n  snap: false,\n  /**\n   * for scrollbar\n   * scrollbar: {\n   *   fade: true,\n   *   interactive: false\n   * }\n   */\n  scrollbar: false,\n  /**\n   * for pull down and refresh\n   * pullDownRefresh: {\n   *   threshold: 50,\n   *   stop: 20\n   * }\n   */\n  pullDownRefresh: false,\n  /**\n   * for pull up and load\n   * pullUpLoad: {\n   *   threshold: 50\n   * }\n   */\n  pullUpLoad: false,\n  /**\n   * for mouse wheel\n   * mouseWheel: {\n   *   speed: 20,\n   *   invert: false,\n   *   easeTime: 300\n   * }\n   */\n  mouseWheel: false,\n  stopPropagation: false,\n  /**\n   * for zoom\n   * zoom: {\n   *   start: 1,\n   *   min: 1,\n   *   max: 4\n   * }\n   */\n  zoom: false,\n  /**\n   * for infinity\n   * infinity: {\n   *   render(item, div) {\n   *   },\n   *   createTombstone() {\n   *   },\n   *   fetch(count) {\n   *   }\n   * }\n   */\n  infinity: false,\n  /**\n   * for double click\n   * dblclick: {\n   *   delay: 300\n   * }\n   */\n  dblclick: false\n};\n\nfunction initMixin(BScroll) {\n  BScroll.prototype._init = function (el, options) {\n    this._handleOptions(options);\n\n    // init private custom events\n    this._events = {};\n\n    this.x = 0;\n    this.y = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n\n    this.setScale(1);\n\n    this._addDOMEvents();\n\n    this._initExtFeatures();\n\n    this._watchTransition();\n\n    if (this.options.observeDOM) {\n      this._initDOMObserver();\n    }\n\n    if (this.options.autoBlur) {\n      this._handleAutoBlur();\n    }\n\n    this.refresh();\n\n    if (!this.options.snap) {\n      this.scrollTo(this.options.startX, this.options.startY);\n    }\n\n    this.enable();\n  };\n\n  BScroll.prototype.setScale = function (scale) {\n    this.lastScale = isUndef(this.scale) ? scale : this.scale;\n    this.scale = scale;\n  };\n\n  BScroll.prototype._handleOptions = function (options) {\n    this.options = extend({}, DEFAULT_OPTIONS, options);\n\n    this.translateZ = this.options.HWCompositing && hasPerspective ? ' translateZ(0)' : '';\n\n    this.options.useTransition = this.options.useTransition && hasTransition;\n    this.options.useTransform = this.options.useTransform && hasTransform;\n\n    this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault;\n\n    // If you want eventPassthrough I have to lock one of the axes\n    this.options.scrollX = this.options.eventPassthrough === 'horizontal' ? false : this.options.scrollX;\n    this.options.scrollY = this.options.eventPassthrough === 'vertical' ? false : this.options.scrollY;\n\n    // With eventPassthrough we also need lockDirection mechanism\n    this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough;\n    this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold;\n\n    if (this.options.tap === true) {\n      this.options.tap = 'tap';\n    }\n  };\n\n  BScroll.prototype._addDOMEvents = function () {\n    var eventOperation = addEvent;\n    this._handleDOMEvents(eventOperation);\n  };\n\n  BScroll.prototype._removeDOMEvents = function () {\n    var eventOperation = removeEvent;\n    this._handleDOMEvents(eventOperation);\n  };\n\n  BScroll.prototype._handleDOMEvents = function (eventOperation) {\n    var target = this.options.bindToWrapper ? this.wrapper : window;\n    eventOperation(window, 'orientationchange', this);\n    eventOperation(window, 'resize', this);\n\n    if (this.options.click) {\n      eventOperation(this.wrapper, 'click', this, true);\n    }\n\n    if (!this.options.disableMouse) {\n      eventOperation(this.wrapper, 'mousedown', this);\n      eventOperation(target, 'mousemove', this);\n      eventOperation(target, 'mousecancel', this);\n      eventOperation(target, 'mouseup', this);\n    }\n\n    if (hasTouch && !this.options.disableTouch) {\n      eventOperation(this.wrapper, 'touchstart', this);\n      eventOperation(target, 'touchmove', this);\n      eventOperation(target, 'touchcancel', this);\n      eventOperation(target, 'touchend', this);\n    }\n\n    eventOperation(this.scroller, style.transitionEnd, this);\n  };\n\n  BScroll.prototype._initExtFeatures = function () {\n    if (this.options.snap) {\n      this._initSnap();\n    }\n    if (this.options.scrollbar) {\n      this._initScrollbar();\n    }\n    if (this.options.pullUpLoad) {\n      this._initPullUp();\n    }\n    if (this.options.pullDownRefresh) {\n      this._initPullDown();\n    }\n    if (this.options.wheel) {\n      this._initWheel();\n    }\n    if (this.options.mouseWheel) {\n      this._initMouseWheel();\n    }\n    if (this.options.zoom) {\n      this._initZoom();\n    }\n    if (this.options.infinity) {\n      this._initInfinite();\n    }\n  };\n\n  BScroll.prototype._watchTransition = function () {\n    if (typeof Object.defineProperty !== 'function') {\n      return;\n    }\n    var me = this;\n    var isInTransition = false;\n    var key = this.useTransition ? 'isInTransition' : 'isAnimating';\n    Object.defineProperty(this, key, {\n      get: function get() {\n        return isInTransition;\n      },\n      set: function set(newVal) {\n        isInTransition = newVal;\n        // fix issue #359\n        var el = me.scroller.children.length ? me.scroller.children : [me.scroller];\n        var pointerEvents = isInTransition && !me.pulling ? 'none' : 'auto';\n        for (var i = 0; i < el.length; i++) {\n          el[i].style.pointerEvents = pointerEvents;\n        }\n      }\n    });\n  };\n\n  BScroll.prototype._handleAutoBlur = function () {\n    this.on('scrollStart', function () {\n      var activeElement = document.activeElement;\n      if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {\n        activeElement.blur();\n      }\n    });\n  };\n\n  BScroll.prototype._initDOMObserver = function () {\n    var _this = this;\n\n    if (typeof MutationObserver !== 'undefined') {\n      var timer = void 0;\n      var observer = new MutationObserver(function (mutations) {\n        // don't do any refresh during the transition, or outside of the boundaries\n        if (_this._shouldNotRefresh()) {\n          return;\n        }\n        var immediateRefresh = false;\n        var deferredRefresh = false;\n        for (var i = 0; i < mutations.length; i++) {\n          var mutation = mutations[i];\n          if (mutation.type !== 'attributes') {\n            immediateRefresh = true;\n            break;\n          } else {\n            if (mutation.target !== _this.scroller) {\n              deferredRefresh = true;\n              break;\n            }\n          }\n        }\n        if (immediateRefresh) {\n          _this.refresh();\n        } else if (deferredRefresh) {\n          // attributes changes too often\n          clearTimeout(timer);\n          timer = setTimeout(function () {\n            if (!_this._shouldNotRefresh()) {\n              _this.refresh();\n            }\n          }, 60);\n        }\n      });\n      var config = {\n        attributes: true,\n        childList: true,\n        subtree: true\n      };\n      observer.observe(this.scroller, config);\n\n      this.on('destroy', function () {\n        observer.disconnect();\n      });\n    } else {\n      this._checkDOMUpdate();\n    }\n  };\n\n  BScroll.prototype._shouldNotRefresh = function () {\n    var outsideBoundaries = this.x > this.minScrollX || this.x < this.maxScrollX || this.y > this.minScrollY || this.y < this.maxScrollY;\n\n    return this.isInTransition || this.stopFromTransition || outsideBoundaries;\n  };\n\n  BScroll.prototype._checkDOMUpdate = function () {\n    var scrollerRect = getRect(this.scroller);\n    var oldWidth = scrollerRect.width;\n    var oldHeight = scrollerRect.height;\n\n    function check() {\n      if (this.destroyed) {\n        return;\n      }\n      scrollerRect = getRect(this.scroller);\n      var newWidth = scrollerRect.width;\n      var newHeight = scrollerRect.height;\n\n      if (oldWidth !== newWidth || oldHeight !== newHeight) {\n        this.refresh();\n      }\n      oldWidth = newWidth;\n      oldHeight = newHeight;\n\n      next.call(this);\n    }\n\n    function next() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        check.call(_this2);\n      }, 1000);\n    }\n\n    next.call(this);\n  };\n\n  BScroll.prototype.handleEvent = function (e) {\n    switch (e.type) {\n      case 'touchstart':\n      case 'mousedown':\n        this._start(e);\n        if (this.options.zoom && e.touches && e.touches.length > 1) {\n          this._zoomStart(e);\n        }\n        break;\n      case 'touchmove':\n      case 'mousemove':\n        if (this.options.zoom && e.touches && e.touches.length > 1) {\n          this._zoom(e);\n        } else {\n          this._move(e);\n        }\n        break;\n      case 'touchend':\n      case 'mouseup':\n      case 'touchcancel':\n      case 'mousecancel':\n        if (this.scaled) {\n          this._zoomEnd(e);\n        } else {\n          this._end(e);\n        }\n        break;\n      case 'orientationchange':\n      case 'resize':\n        this._resize();\n        break;\n      case 'transitionend':\n      case 'webkitTransitionEnd':\n      case 'oTransitionEnd':\n      case 'MSTransitionEnd':\n        this._transitionEnd(e);\n        break;\n      case 'click':\n        if (this.enabled && !e._constructed) {\n          if (!preventDefaultException(e.target, this.options.preventDefaultException)) {\n            e.preventDefault();\n            e.stopPropagation();\n          }\n        }\n        break;\n      case 'wheel':\n      case 'DOMMouseScroll':\n      case 'mousewheel':\n        this._onMouseWheel(e);\n        break;\n    }\n  };\n\n  BScroll.prototype.refresh = function () {\n    var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\n    var wrapperRect = getRect(this.wrapper);\n    this.wrapperWidth = wrapperRect.width;\n    this.wrapperHeight = wrapperRect.height;\n\n    var scrollerRect = getRect(this.scroller);\n    this.scrollerWidth = Math.round(scrollerRect.width * this.scale);\n    this.scrollerHeight = Math.round(scrollerRect.height * this.scale);\n\n    this.relativeX = scrollerRect.left;\n    this.relativeY = scrollerRect.top;\n\n    if (isWrapperStatic) {\n      this.relativeX -= wrapperRect.left;\n      this.relativeY -= wrapperRect.top;\n    }\n\n    this.minScrollX = 0;\n    this.minScrollY = 0;\n\n    var wheel = this.options.wheel;\n    if (wheel) {\n      this.items = this.scroller.children;\n      this.options.itemHeight = this.itemHeight = this.items.length ? this.scrollerHeight / this.items.length : 0;\n      if (this.selectedIndex === undefined) {\n        this.selectedIndex = wheel.selectedIndex || 0;\n      }\n      this.options.startY = -this.selectedIndex * this.itemHeight;\n      this.maxScrollX = 0;\n      this.maxScrollY = -this.itemHeight * (this.items.length - 1);\n    } else {\n      this.maxScrollX = this.wrapperWidth - this.scrollerWidth;\n      if (!this.options.infinity) {\n        this.maxScrollY = this.wrapperHeight - this.scrollerHeight;\n      }\n      if (this.maxScrollX < 0) {\n        this.maxScrollX -= this.relativeX;\n        this.minScrollX = -this.relativeX;\n      } else if (this.scale > 1) {\n        this.maxScrollX = this.maxScrollX / 2 - this.relativeX;\n        this.minScrollX = this.maxScrollX;\n      }\n      if (this.maxScrollY < 0) {\n        this.maxScrollY -= this.relativeY;\n        this.minScrollY = -this.relativeY;\n      } else if (this.scale > 1) {\n        this.maxScrollY = this.maxScrollY / 2 - this.relativeY;\n        this.minScrollY = this.maxScrollY;\n      }\n    }\n\n    this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < this.minScrollX;\n    this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < this.minScrollY;\n\n    if (!this.hasHorizontalScroll) {\n      this.maxScrollX = this.minScrollX;\n      this.scrollerWidth = this.wrapperWidth;\n    }\n\n    if (!this.hasVerticalScroll) {\n      this.maxScrollY = this.minScrollY;\n      this.scrollerHeight = this.wrapperHeight;\n    }\n\n    this.endTime = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.wrapperOffset = offset(this.wrapper);\n\n    this.trigger('refresh');\n\n    !this.scaled && this.resetPosition();\n  };\n\n  BScroll.prototype.enable = function () {\n    this.enabled = true;\n  };\n\n  BScroll.prototype.disable = function () {\n    this.enabled = false;\n  };\n}\n\nvar ease = {\n  // easeOutQuint\n  swipe: {\n    style: 'cubic-bezier(0.23, 1, 0.32, 1)',\n    fn: function fn(t) {\n      return 1 + --t * t * t * t * t;\n    }\n  },\n  // easeOutQuard\n  swipeBounce: {\n    style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    fn: function fn(t) {\n      return t * (2 - t);\n    }\n  },\n  // easeOutQuart\n  bounce: {\n    style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n    fn: function fn(t) {\n      return 1 - --t * t * t * t;\n    }\n  }\n};\n\nfunction momentum(current, start, time, lowerMargin, upperMargin, wrapperSize, options) {\n  var distance = current - start;\n  var speed = Math.abs(distance) / time;\n\n  var deceleration = options.deceleration,\n      itemHeight = options.itemHeight,\n      swipeBounceTime = options.swipeBounceTime,\n      wheel = options.wheel,\n      swipeTime = options.swipeTime;\n\n  var duration = swipeTime;\n  var rate = wheel ? 4 : 15;\n\n  var destination = current + speed / deceleration * (distance < 0 ? -1 : 1);\n\n  if (wheel && itemHeight) {\n    destination = Math.round(destination / itemHeight) * itemHeight;\n  }\n\n  if (destination < lowerMargin) {\n    destination = wrapperSize ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - wrapperSize / rate * speed) : lowerMargin;\n    duration = swipeBounceTime;\n  } else if (destination > upperMargin) {\n    destination = wrapperSize ? Math.min(upperMargin + wrapperSize / 4, upperMargin + wrapperSize / rate * speed) : upperMargin;\n    duration = swipeBounceTime;\n  }\n\n  return {\n    destination: Math.round(destination),\n    duration: duration\n  };\n}\n\nvar DEFAULT_INTERVAL = 100 / 60;\n\nfunction noop() {}\n\nvar requestAnimationFrame = function () {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop;\n  }\n  return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame ||\n  // if all else fails, use setTimeout\n  function (callback) {\n    return window.setTimeout(callback, (callback.interval || DEFAULT_INTERVAL) / 2); // make interval as precise as possible.\n  };\n}();\n\nvar cancelAnimationFrame = function () {\n  if (!inBrowser) {\n    /* istanbul ignore if */\n    return noop;\n  }\n  return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || function (id) {\n    window.clearTimeout(id);\n  };\n}();\n\nvar DIRECTION_UP = 1;\nvar DIRECTION_DOWN = -1;\nvar DIRECTION_LEFT = 1;\nvar DIRECTION_RIGHT = -1;\n\nvar PROBE_DEBOUNCE = 1;\n\nvar PROBE_REALTIME = 3;\n\nfunction warn(msg) {\n  console.error('[BScroll warn]: ' + msg);\n}\n\nfunction assert(condition, msg) {\n  if (!condition) {\n    throw new Error('[BScroll] ' + msg);\n  }\n}\n\nfunction coreMixin(BScroll) {\n  BScroll.prototype._start = function (e) {\n    var _eventType = eventType[e.type];\n    if (_eventType !== TOUCH_EVENT) {\n      if (e.button !== 0) {\n        return;\n      }\n    }\n    if (!this.enabled || this.destroyed || this.initiated && this.initiated !== _eventType) {\n      return;\n    }\n    this.initiated = _eventType;\n\n    if (this.options.preventDefault && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.moved = false;\n    this.distX = 0;\n    this.distY = 0;\n    this.directionX = 0;\n    this.directionY = 0;\n    this.movingDirectionX = 0;\n    this.movingDirectionY = 0;\n    this.directionLocked = 0;\n\n    this._transitionTime();\n    this.startTime = getNow();\n\n    if (this.options.wheel) {\n      this.target = e.target;\n    }\n\n    this.stop();\n\n    var point = e.touches ? e.touches[0] : e;\n\n    this.startX = this.x;\n    this.startY = this.y;\n    this.absStartX = this.x;\n    this.absStartY = this.y;\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n\n    this.trigger('beforeScrollStart');\n  };\n\n  BScroll.prototype._move = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    var point = e.touches ? e.touches[0] : e;\n    var deltaX = point.pageX - this.pointX;\n    var deltaY = point.pageY - this.pointY;\n\n    this.pointX = point.pageX;\n    this.pointY = point.pageY;\n\n    this.distX += deltaX;\n    this.distY += deltaY;\n\n    var absDistX = Math.abs(this.distX);\n    var absDistY = Math.abs(this.distY);\n\n    var timestamp = getNow();\n\n    // We need to move at least momentumLimitDistance pixels for the scrolling to initiate\n    if (timestamp - this.endTime > this.options.momentumLimitTime && absDistY < this.options.momentumLimitDistance && absDistX < this.options.momentumLimitDistance) {\n      return;\n    }\n\n    // If you are scrolling in one direction lock the other\n    if (!this.directionLocked && !this.options.freeScroll) {\n      if (absDistX > absDistY + this.options.directionLockThreshold) {\n        this.directionLocked = 'h'; // lock horizontally\n      } else if (absDistY >= absDistX + this.options.directionLockThreshold) {\n        this.directionLocked = 'v'; // lock vertically\n      } else {\n        this.directionLocked = 'n'; // no lock\n      }\n    }\n\n    if (this.directionLocked === 'h') {\n      if (this.options.eventPassthrough === 'vertical') {\n        e.preventDefault();\n      } else if (this.options.eventPassthrough === 'horizontal') {\n        this.initiated = false;\n        return;\n      }\n      deltaY = 0;\n    } else if (this.directionLocked === 'v') {\n      if (this.options.eventPassthrough === 'horizontal') {\n        e.preventDefault();\n      } else if (this.options.eventPassthrough === 'vertical') {\n        this.initiated = false;\n        return;\n      }\n      deltaX = 0;\n    }\n\n    deltaX = this.hasHorizontalScroll ? deltaX : 0;\n    deltaY = this.hasVerticalScroll ? deltaY : 0;\n    this.movingDirectionX = deltaX > 0 ? DIRECTION_RIGHT : deltaX < 0 ? DIRECTION_LEFT : 0;\n    this.movingDirectionY = deltaY > 0 ? DIRECTION_DOWN : deltaY < 0 ? DIRECTION_UP : 0;\n\n    var newX = this.x + deltaX;\n    var newY = this.y + deltaY;\n\n    var top = false;\n    var bottom = false;\n    var left = false;\n    var right = false;\n    // Slow down or stop if outside of the boundaries\n    var bounce = this.options.bounce;\n    if (bounce !== false) {\n      top = bounce.top === undefined ? true : bounce.top;\n      bottom = bounce.bottom === undefined ? true : bounce.bottom;\n      left = bounce.left === undefined ? true : bounce.left;\n      right = bounce.right === undefined ? true : bounce.right;\n    }\n    if (newX > this.minScrollX || newX < this.maxScrollX) {\n      if (newX > this.minScrollX && left || newX < this.maxScrollX && right) {\n        newX = this.x + deltaX / 3;\n      } else {\n        newX = newX > this.minScrollX ? this.minScrollX : this.maxScrollX;\n      }\n    }\n    if (newY > this.minScrollY || newY < this.maxScrollY) {\n      if (newY > this.minScrollY && top || newY < this.maxScrollY && bottom) {\n        newY = this.y + deltaY / 3;\n      } else {\n        newY = newY > this.minScrollY ? this.minScrollY : this.maxScrollY;\n      }\n    }\n\n    if (!this.moved) {\n      this.moved = true;\n      this.trigger('scrollStart');\n    }\n\n    this._translate(newX, newY);\n\n    if (timestamp - this.startTime > this.options.momentumLimitTime) {\n      this.startTime = timestamp;\n      this.startX = this.x;\n      this.startY = this.y;\n\n      if (this.options.probeType === PROBE_DEBOUNCE) {\n        this.trigger('scroll', {\n          x: this.x,\n          y: this.y\n        });\n      }\n    }\n\n    if (this.options.probeType > PROBE_DEBOUNCE) {\n      this.trigger('scroll', {\n        x: this.x,\n        y: this.y\n      });\n    }\n\n    var scrollLeft = document.documentElement.scrollLeft || window.pageXOffset || document.body.scrollLeft;\n    var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n\n    var pX = this.pointX - scrollLeft;\n    var pY = this.pointY - scrollTop;\n\n    if (pX > document.documentElement.clientWidth - this.options.momentumLimitDistance || pX < this.options.momentumLimitDistance || pY < this.options.momentumLimitDistance || pY > document.documentElement.clientHeight - this.options.momentumLimitDistance) {\n      this._end(e);\n    }\n  };\n\n  BScroll.prototype._end = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n    this.initiated = false;\n\n    if (this.options.preventDefault && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n      e.preventDefault();\n    }\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.trigger('touchEnd', {\n      x: this.x,\n      y: this.y\n    });\n\n    this.isInTransition = false;\n\n    // ensures that the last position is rounded\n    var newX = Math.round(this.x);\n    var newY = Math.round(this.y);\n\n    var deltaX = newX - this.absStartX;\n    var deltaY = newY - this.absStartY;\n    this.directionX = deltaX > 0 ? DIRECTION_RIGHT : deltaX < 0 ? DIRECTION_LEFT : 0;\n    this.directionY = deltaY > 0 ? DIRECTION_DOWN : deltaY < 0 ? DIRECTION_UP : 0;\n\n    // if configure pull down refresh, check it first\n    if (this.options.pullDownRefresh && this._checkPullDown()) {\n      return;\n    }\n\n    // check if it is a click operation\n    if (this._checkClick(e)) {\n      this.trigger('scrollCancel');\n      return;\n    }\n\n    // reset if we are outside of the boundaries\n    if (this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      return;\n    }\n\n    this._translate(newX, newY);\n\n    this.endTime = getNow();\n    var duration = this.endTime - this.startTime;\n    var absDistX = Math.abs(newX - this.startX);\n    var absDistY = Math.abs(newY - this.startY);\n\n    // flick\n    if (this._events.flick && duration < this.options.flickLimitTime && absDistX < this.options.flickLimitDistance && absDistY < this.options.flickLimitDistance) {\n      this.trigger('flick');\n      return;\n    }\n\n    var time = 0;\n    // start momentum animation if needed\n    if (this.options.momentum && duration < this.options.momentumLimitTime && (absDistY > this.options.momentumLimitDistance || absDistX > this.options.momentumLimitDistance)) {\n      var top = false;\n      var bottom = false;\n      var left = false;\n      var right = false;\n      var bounce = this.options.bounce;\n      if (bounce !== false) {\n        top = bounce.top === undefined ? true : bounce.top;\n        bottom = bounce.bottom === undefined ? true : bounce.bottom;\n        left = bounce.left === undefined ? true : bounce.left;\n        right = bounce.right === undefined ? true : bounce.right;\n      }\n      var wrapperWidth = this.directionX === DIRECTION_RIGHT && left || this.directionX === DIRECTION_LEFT && right ? this.wrapperWidth : 0;\n      var wrapperHeight = this.directionY === DIRECTION_DOWN && top || this.directionY === DIRECTION_UP && bottom ? this.wrapperHeight : 0;\n      var momentumX = this.hasHorizontalScroll ? momentum(this.x, this.startX, duration, this.maxScrollX, this.minScrollX, wrapperWidth, this.options) : { destination: newX, duration: 0 };\n      var momentumY = this.hasVerticalScroll ? momentum(this.y, this.startY, duration, this.maxScrollY, this.minScrollY, wrapperHeight, this.options) : { destination: newY, duration: 0 };\n      newX = momentumX.destination;\n      newY = momentumY.destination;\n      time = Math.max(momentumX.duration, momentumY.duration);\n      this.isInTransition = true;\n    } else {\n      if (this.options.wheel) {\n        newY = Math.round(newY / this.itemHeight) * this.itemHeight;\n        time = this.options.wheel.adjustTime || 400;\n      }\n    }\n\n    var easing = ease.swipe;\n    if (this.options.snap) {\n      var snap = this._nearestSnap(newX, newY);\n      this.currentPage = snap;\n      time = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(newX - snap.x), 1000), Math.min(Math.abs(newY - snap.y), 1000)), 300);\n      newX = snap.x;\n      newY = snap.y;\n\n      this.directionX = 0;\n      this.directionY = 0;\n      easing = this.options.snap.easing || ease.bounce;\n    }\n\n    if (newX !== this.x || newY !== this.y) {\n      // change easing function when scroller goes out of the boundaries\n      if (newX > this.minScrollX || newX < this.maxScrollX || newY > this.minScrollY || newY < this.maxScrollY) {\n        easing = ease.swipeBounce;\n      }\n      this.scrollTo(newX, newY, time, easing);\n      return;\n    }\n\n    if (this.options.wheel) {\n      this.selectedIndex = Math.round(Math.abs(this.y / this.itemHeight));\n    }\n    this.trigger('scrollEnd', {\n      x: this.x,\n      y: this.y\n    });\n  };\n\n  BScroll.prototype._checkClick = function (e) {\n    // when in the process of pulling down, it should not prevent click\n    var preventClick = this.stopFromTransition && !this.pulling;\n    this.stopFromTransition = false;\n\n    // we scrolled less than 15 pixels\n    if (!this.moved) {\n      if (this.options.wheel) {\n        if (this.target && this.target.classList.contains(this.options.wheel.wheelWrapperClass)) {\n          var index = Math.abs(Math.round(this.y / this.itemHeight));\n          var _offset = Math.round((this.pointY + offsetToBody(this.wrapper).top - this.wrapperHeight / 2) / this.itemHeight);\n          this.target = this.items[index + _offset];\n        }\n        this.scrollToElement(this.target, this.options.wheel.adjustTime || 400, true, true, ease.swipe);\n        return true;\n      } else {\n        if (!preventClick) {\n          var _dblclick = this.options.dblclick;\n          var dblclickTrigged = false;\n          if (_dblclick && this.lastClickTime) {\n            var _dblclick$delay = _dblclick.delay,\n                delay = _dblclick$delay === undefined ? 300 : _dblclick$delay;\n\n            if (getNow() - this.lastClickTime < delay) {\n              dblclickTrigged = true;\n              dblclick(e);\n            }\n          }\n          if (this.options.tap) {\n            tap(e, this.options.tap);\n          }\n\n          if (this.options.click && !preventDefaultException(e.target, this.options.preventDefaultException)) {\n            click(e);\n          }\n          this.lastClickTime = dblclickTrigged ? null : getNow();\n          return true;\n        }\n        return false;\n      }\n    }\n    return false;\n  };\n\n  BScroll.prototype._resize = function () {\n    var _this = this;\n\n    if (!this.enabled) {\n      return;\n    }\n    // fix a scroll problem under Android condition\n    if (isAndroid) {\n      this.wrapper.scrollTop = 0;\n    }\n    clearTimeout(this.resizeTimeout);\n    this.resizeTimeout = setTimeout(function () {\n      _this.refresh();\n    }, this.options.resizePolling);\n  };\n\n  BScroll.prototype._startProbe = function () {\n    cancelAnimationFrame(this.probeTimer);\n    this.probeTimer = requestAnimationFrame(probe);\n\n    var me = this;\n\n    function probe() {\n      var pos = me.getComputedPosition();\n      me.trigger('scroll', pos);\n      if (!me.isInTransition) {\n        me.trigger('scrollEnd', pos);\n        return;\n      }\n      me.probeTimer = requestAnimationFrame(probe);\n    }\n  };\n\n  BScroll.prototype._transitionTime = function () {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    this.scrollerStyle[style.transitionDuration] = time + 'ms';\n\n    if (this.options.wheel) {\n      for (var i = 0; i < this.items.length; i++) {\n        this.items[i].style[style.transitionDuration] = time + 'ms';\n      }\n    }\n\n    if (this.indicators) {\n      for (var _i = 0; _i < this.indicators.length; _i++) {\n        this.indicators[_i].transitionTime(time);\n      }\n    }\n  };\n\n  BScroll.prototype._transitionTimingFunction = function (easing) {\n    this.scrollerStyle[style.transitionTimingFunction] = easing;\n\n    if (this.options.wheel) {\n      for (var i = 0; i < this.items.length; i++) {\n        this.items[i].style[style.transitionTimingFunction] = easing;\n      }\n    }\n\n    if (this.indicators) {\n      for (var _i2 = 0; _i2 < this.indicators.length; _i2++) {\n        this.indicators[_i2].transitionTimingFunction(easing);\n      }\n    }\n  };\n\n  BScroll.prototype._transitionEnd = function (e) {\n    if (e.target !== this.scroller || !this.isInTransition) {\n      return;\n    }\n\n    this._transitionTime();\n    var needReset = !this.pulling || this.movingDirectionY === DIRECTION_UP;\n    if (needReset && !this.resetPosition(this.options.bounceTime, ease.bounce)) {\n      this.isInTransition = false;\n      if (this.options.probeType !== PROBE_REALTIME) {\n        this.trigger('scrollEnd', {\n          x: this.x,\n          y: this.y\n        });\n      }\n    }\n  };\n\n  BScroll.prototype._translate = function (x, y, scale) {\n    assert(!isUndef(x) && !isUndef(y), 'Translate x or y is null or undefined.');\n    if (isUndef(scale)) {\n      scale = this.scale;\n    }\n    if (this.options.useTransform) {\n      this.scrollerStyle[style.transform] = 'translate(' + x + 'px,' + y + 'px) scale(' + scale + ')' + this.translateZ;\n    } else {\n      x = Math.round(x);\n      y = Math.round(y);\n      this.scrollerStyle.left = x + 'px';\n      this.scrollerStyle.top = y + 'px';\n    }\n\n    if (this.options.wheel) {\n      var _options$wheel$rotate = this.options.wheel.rotate,\n          rotate = _options$wheel$rotate === undefined ? 25 : _options$wheel$rotate;\n\n      for (var i = 0; i < this.items.length; i++) {\n        var deg = rotate * (y / this.itemHeight + i);\n        this.items[i].style[style.transform] = 'rotateX(' + deg + 'deg)';\n      }\n    }\n\n    this.x = x;\n    this.y = y;\n    this.setScale(scale);\n\n    if (this.indicators) {\n      for (var _i3 = 0; _i3 < this.indicators.length; _i3++) {\n        this.indicators[_i3].updatePosition();\n      }\n    }\n  };\n\n  BScroll.prototype._animate = function (destX, destY, duration, easingFn) {\n    var me = this;\n    var startX = this.x;\n    var startY = this.y;\n    var startScale = this.lastScale;\n    var destScale = this.scale;\n    var startTime = getNow();\n    var destTime = startTime + duration;\n\n    function step() {\n      var now = getNow();\n\n      if (now >= destTime) {\n        me.isAnimating = false;\n        me._translate(destX, destY, destScale);\n\n        me.trigger('scroll', {\n          x: me.x,\n          y: me.y\n        });\n\n        if (!me.pulling && !me.resetPosition(me.options.bounceTime)) {\n          me.trigger('scrollEnd', {\n            x: me.x,\n            y: me.y\n          });\n        }\n        return;\n      }\n      now = (now - startTime) / duration;\n      var easing = easingFn(now);\n      var newX = (destX - startX) * easing + startX;\n      var newY = (destY - startY) * easing + startY;\n      var newScale = (destScale - startScale) * easing + startScale;\n\n      me._translate(newX, newY, newScale);\n\n      if (me.isAnimating) {\n        me.animateTimer = requestAnimationFrame(step);\n      }\n\n      if (me.options.probeType === PROBE_REALTIME) {\n        me.trigger('scroll', {\n          x: me.x,\n          y: me.y\n        });\n      }\n    }\n\n    this.isAnimating = true;\n    cancelAnimationFrame(this.animateTimer);\n    step();\n  };\n\n  BScroll.prototype.scrollBy = function (x, y) {\n    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ease.bounce;\n\n    x = this.x + x;\n    y = this.y + y;\n\n    this.scrollTo(x, y, time, easing);\n  };\n\n  BScroll.prototype.scrollTo = function (x, y) {\n    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var easing = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : ease.bounce;\n\n    this.isInTransition = this.options.useTransition && time > 0 && (x !== this.x || y !== this.y);\n\n    if (!time || this.options.useTransition) {\n      this._transitionTimingFunction(easing.style);\n      this._transitionTime(time);\n      this._translate(x, y);\n\n      if (time && this.options.probeType === PROBE_REALTIME) {\n        this._startProbe();\n      }\n\n      if (!time && (x !== this.x || y !== this.y)) {\n        this.trigger('scroll', {\n          x: x,\n          y: y\n        });\n        // force reflow to put everything in position\n        this._reflow = document.body.offsetHeight;\n        if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\n          this.trigger('scrollEnd', {\n            x: x,\n            y: y\n          });\n        }\n      }\n\n      if (this.options.wheel) {\n        if (y > this.minScrollY) {\n          this.selectedIndex = 0;\n        } else if (y < this.maxScrollY) {\n          this.selectedIndex = this.items.length - 1;\n        } else {\n          this.selectedIndex = Math.round(Math.abs(y / this.itemHeight));\n        }\n      }\n    } else {\n      this._animate(x, y, time, easing.fn);\n    }\n  };\n\n  BScroll.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\n    if (!el) {\n      return;\n    }\n    el = el.nodeType ? el : this.scroller.querySelector(el);\n\n    if (this.options.wheel && !el.classList.contains(this.options.wheel.wheelItemClass)) {\n      return;\n    }\n\n    var pos = offset(el);\n    pos.left -= this.wrapperOffset.left;\n    pos.top -= this.wrapperOffset.top;\n\n    // if offsetX/Y are true we center the element to the screen\n    if (offsetX === true) {\n      offsetX = Math.round(el.offsetWidth / 2 - this.wrapper.offsetWidth / 2);\n    }\n    if (offsetY === true) {\n      offsetY = Math.round(el.offsetHeight / 2 - this.wrapper.offsetHeight / 2);\n    }\n\n    pos.left -= offsetX || 0;\n    pos.top -= offsetY || 0;\n    pos.left = pos.left > this.minScrollX ? this.minScrollX : pos.left < this.maxScrollX ? this.maxScrollX : pos.left;\n    pos.top = pos.top > this.minScrollY ? this.minScrollY : pos.top < this.maxScrollY ? this.maxScrollY : pos.top;\n\n    if (this.options.wheel) {\n      pos.top = Math.round(pos.top / this.itemHeight) * this.itemHeight;\n    }\n\n    this.scrollTo(pos.left, pos.top, time, easing);\n  };\n\n  BScroll.prototype.resetPosition = function () {\n    var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var easeing = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ease.bounce;\n\n    var x = this.x;\n    var roundX = Math.round(x);\n    if (!this.hasHorizontalScroll || roundX > this.minScrollX) {\n      x = this.minScrollX;\n    } else if (roundX < this.maxScrollX) {\n      x = this.maxScrollX;\n    }\n\n    var y = this.y;\n    var roundY = Math.round(y);\n    if (!this.hasVerticalScroll || roundY > this.minScrollY) {\n      y = this.minScrollY;\n    } else if (roundY < this.maxScrollY) {\n      y = this.maxScrollY;\n    }\n\n    if (x === this.x && y === this.y) {\n      return false;\n    }\n\n    this.scrollTo(x, y, time, easeing);\n\n    return true;\n  };\n\n  BScroll.prototype.getComputedPosition = function () {\n    var matrix = window.getComputedStyle(this.scroller, null);\n    var x = void 0;\n    var y = void 0;\n\n    if (this.options.useTransform) {\n      matrix = matrix[style.transform].split(')')[0].split(', ');\n      x = +(matrix[12] || matrix[4]);\n      y = +(matrix[13] || matrix[5]);\n    } else {\n      x = +matrix.left.replace(/[^-\\d.]/g, '');\n      y = +matrix.top.replace(/[^-\\d.]/g, '');\n    }\n\n    return {\n      x: x,\n      y: y\n    };\n  };\n\n  BScroll.prototype.stop = function () {\n    if (this.options.useTransition && this.isInTransition) {\n      this.isInTransition = false;\n      cancelAnimationFrame(this.probeTimer);\n      var pos = this.getComputedPosition();\n      this._translate(pos.x, pos.y);\n      if (this.options.wheel) {\n        this.target = this.items[Math.round(-pos.y / this.itemHeight)];\n      } else {\n        this.trigger('scrollEnd', {\n          x: this.x,\n          y: this.y\n        });\n      }\n      this.stopFromTransition = true;\n    } else if (!this.options.useTransition && this.isAnimating) {\n      this.isAnimating = false;\n      cancelAnimationFrame(this.animateTimer);\n      this.trigger('scrollEnd', {\n        x: this.x,\n        y: this.y\n      });\n      this.stopFromTransition = true;\n    }\n  };\n\n  BScroll.prototype.destroy = function () {\n    this.destroyed = true;\n    this.trigger('destroy');\n    if (this.options.useTransition) {\n      cancelAnimationFrame(this.probeTimer);\n    } else {\n      cancelAnimationFrame(this.animateTimer);\n    }\n    this._removeDOMEvents();\n    // remove custom events\n    this._events = {};\n  };\n}\n\nfunction snapMixin(BScroll) {\n  BScroll.prototype._initSnap = function () {\n    var _this = this;\n\n    this.currentPage = {};\n    var snap = this.options.snap;\n\n    if (snap.loop) {\n      var children = this.scroller.children;\n      if (children.length > 1) {\n        prepend(children[children.length - 1].cloneNode(true), this.scroller);\n        this.scroller.appendChild(children[1].cloneNode(true));\n      } else {\n        // Loop does not make any sense if there is only one child.\n        snap.loop = false;\n      }\n    }\n\n    var el = snap.el;\n    if (typeof el === 'string') {\n      el = this.scroller.querySelectorAll(el);\n    }\n\n    this.on('refresh', function () {\n      _this.pages = [];\n\n      if (!_this.wrapperWidth || !_this.wrapperHeight || !_this.scrollerWidth || !_this.scrollerHeight) {\n        return;\n      }\n\n      var stepX = snap.stepX || _this.wrapperWidth;\n      var stepY = snap.stepY || _this.wrapperHeight;\n\n      var x = 0;\n      var y = void 0;\n      var cx = void 0;\n      var cy = void 0;\n      var i = 0;\n      var l = void 0;\n      var m = 0;\n      var n = void 0;\n      var rect = void 0;\n      if (!el) {\n        cx = Math.round(stepX / 2);\n        cy = Math.round(stepY / 2);\n\n        while (x > -_this.scrollerWidth) {\n          _this.pages[i] = [];\n          l = 0;\n          y = 0;\n\n          while (y > -_this.scrollerHeight) {\n            _this.pages[i][l] = {\n              x: Math.max(x, _this.maxScrollX),\n              y: Math.max(y, _this.maxScrollY),\n              width: stepX,\n              height: stepY,\n              cx: x - cx,\n              cy: y - cy\n            };\n\n            y -= stepY;\n            l++;\n          }\n\n          x -= stepX;\n          i++;\n        }\n      } else {\n        l = el.length;\n        n = -1;\n\n        for (; i < l; i++) {\n          rect = getRect(el[i]);\n          if (i === 0 || rect.left <= getRect(el[i - 1]).left) {\n            m = 0;\n            n++;\n          }\n\n          if (!_this.pages[m]) {\n            _this.pages[m] = [];\n          }\n\n          x = Math.max(-rect.left, _this.maxScrollX);\n          y = Math.max(-rect.top, _this.maxScrollY);\n          cx = x - Math.round(rect.width / 2);\n          cy = y - Math.round(rect.height / 2);\n\n          _this.pages[m][n] = {\n            x: x,\n            y: y,\n            width: rect.width,\n            height: rect.height,\n            cx: cx,\n            cy: cy\n          };\n\n          if (x > _this.maxScrollX) {\n            m++;\n          }\n        }\n      }\n\n      _this._checkSnapLoop();\n\n      var initPageX = snap._loopX ? 1 : 0;\n      var initPageY = snap._loopY ? 1 : 0;\n      _this._goToPage(_this.currentPage.pageX || initPageX, _this.currentPage.pageY || initPageY, 0);\n\n      // Update snap threshold if needed.\n      var snapThreshold = snap.threshold;\n      if (snapThreshold % 1 === 0) {\n        _this.snapThresholdX = snapThreshold;\n        _this.snapThresholdY = snapThreshold;\n      } else {\n        _this.snapThresholdX = Math.round(_this.pages[_this.currentPage.pageX][_this.currentPage.pageY].width * snapThreshold);\n        _this.snapThresholdY = Math.round(_this.pages[_this.currentPage.pageX][_this.currentPage.pageY].height * snapThreshold);\n      }\n    });\n\n    this.on('scrollEnd', function () {\n      if (snap.loop) {\n        if (snap._loopX) {\n          if (_this.currentPage.pageX === 0) {\n            _this._goToPage(_this.pages.length - 2, _this.currentPage.pageY, 0);\n          }\n          if (_this.currentPage.pageX === _this.pages.length - 1) {\n            _this._goToPage(1, _this.currentPage.pageY, 0);\n          }\n        } else {\n          if (_this.currentPage.pageY === 0) {\n            _this._goToPage(_this.currentPage.pageX, _this.pages[0].length - 2, 0);\n          }\n          if (_this.currentPage.pageY === _this.pages[0].length - 1) {\n            _this._goToPage(_this.currentPage.pageX, 1, 0);\n          }\n        }\n      }\n    });\n\n    if (snap.listenFlick !== false) {\n      this.on('flick', function () {\n        var time = snap.speed || Math.max(Math.max(Math.min(Math.abs(_this.x - _this.startX), 1000), Math.min(Math.abs(_this.y - _this.startY), 1000)), 300);\n\n        _this._goToPage(_this.currentPage.pageX + _this.directionX, _this.currentPage.pageY + _this.directionY, time);\n      });\n    }\n\n    this.on('destroy', function () {\n      if (snap.loop) {\n        var _children = _this.scroller.children;\n        if (_children.length > 2) {\n          removeChild(_this.scroller, _children[_children.length - 1]);\n          removeChild(_this.scroller, _children[0]);\n        }\n      }\n    });\n  };\n\n  BScroll.prototype._checkSnapLoop = function () {\n    var snap = this.options.snap;\n\n    if (!snap.loop || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    if (this.pages.length > 1) {\n      snap._loopX = true;\n    }\n    if (this.pages[0] && this.pages[0].length > 1) {\n      snap._loopY = true;\n    }\n    if (snap._loopX && snap._loopY) {\n      warn('Loop does not support two direction at the same time.');\n    }\n  };\n\n  BScroll.prototype._nearestSnap = function (x, y) {\n    if (!this.pages.length) {\n      return { x: 0, y: 0, pageX: 0, pageY: 0 };\n    }\n\n    var i = 0;\n    // Check if we exceeded the snap threshold\n    if (Math.abs(x - this.absStartX) <= this.snapThresholdX && Math.abs(y - this.absStartY) <= this.snapThresholdY) {\n      return this.currentPage;\n    }\n\n    if (x > this.minScrollX) {\n      x = this.minScrollX;\n    } else if (x < this.maxScrollX) {\n      x = this.maxScrollX;\n    }\n\n    if (y > this.minScrollY) {\n      y = this.minScrollY;\n    } else if (y < this.maxScrollY) {\n      y = this.maxScrollY;\n    }\n\n    var l = this.pages.length;\n    for (; i < l; i++) {\n      if (x >= this.pages[i][0].cx) {\n        x = this.pages[i][0].x;\n        break;\n      }\n    }\n\n    l = this.pages[i].length;\n\n    var m = 0;\n    for (; m < l; m++) {\n      if (y >= this.pages[0][m].cy) {\n        y = this.pages[0][m].y;\n        break;\n      }\n    }\n\n    if (i === this.currentPage.pageX) {\n      i += this.directionX;\n\n      if (i < 0) {\n        i = 0;\n      } else if (i >= this.pages.length) {\n        i = this.pages.length - 1;\n      }\n\n      x = this.pages[i][0].x;\n    }\n\n    if (m === this.currentPage.pageY) {\n      m += this.directionY;\n\n      if (m < 0) {\n        m = 0;\n      } else if (m >= this.pages[0].length) {\n        m = this.pages[0].length - 1;\n      }\n\n      y = this.pages[0][m].y;\n    }\n\n    return {\n      x: x,\n      y: y,\n      pageX: i,\n      pageY: m\n    };\n  };\n\n  BScroll.prototype._goToPage = function (x) {\n    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var time = arguments[2];\n    var easing = arguments[3];\n\n    var snap = this.options.snap;\n\n    if (!snap || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    easing = easing || snap.easing || ease.bounce;\n\n    if (x >= this.pages.length) {\n      x = this.pages.length - 1;\n    } else if (x < 0) {\n      x = 0;\n    }\n\n    if (!this.pages[x]) {\n      return;\n    }\n\n    if (y >= this.pages[x].length) {\n      y = this.pages[x].length - 1;\n    } else if (y < 0) {\n      y = 0;\n    }\n\n    var posX = this.pages[x][y].x;\n    var posY = this.pages[x][y].y;\n\n    time = time === undefined ? snap.speed || Math.max(Math.max(Math.min(Math.abs(posX - this.x), 1000), Math.min(Math.abs(posY - this.y), 1000)), 300) : time;\n\n    this.currentPage = {\n      x: posX,\n      y: posY,\n      pageX: x,\n      pageY: y\n    };\n    this.scrollTo(posX, posY, time, easing);\n  };\n\n  BScroll.prototype.goToPage = function (x, y, time, easing) {\n    var snap = this.options.snap;\n    if (!snap || !this.pages || !this.pages.length) {\n      return;\n    }\n\n    if (snap.loop) {\n      var len = void 0;\n      if (snap._loopX) {\n        len = this.pages.length - 2;\n        if (x >= len) {\n          x = len - 1;\n        } else if (x < 0) {\n          x = 0;\n        }\n        x += 1;\n      } else {\n        len = this.pages[0].length - 2;\n        if (y >= len) {\n          y = len - 1;\n        } else if (y < 0) {\n          y = 0;\n        }\n        y += 1;\n      }\n    }\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.next = function (time, easing) {\n    var snap = this.options.snap;\n    if (!snap) {\n      return;\n    }\n\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n\n    x++;\n    if (x >= this.pages.length && this.hasVerticalScroll) {\n      x = 0;\n      y++;\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.prev = function (time, easing) {\n    var snap = this.options.snap;\n    if (!snap) {\n      return;\n    }\n\n    var x = this.currentPage.pageX;\n    var y = this.currentPage.pageY;\n\n    x--;\n    if (x < 0 && this.hasVerticalScroll) {\n      x = 0;\n      y--;\n    }\n\n    this._goToPage(x, y, time, easing);\n  };\n\n  BScroll.prototype.getCurrentPage = function () {\n    var snap = this.options.snap;\n    if (!snap) {\n      return null;\n    }\n\n    if (snap.loop) {\n      var currentPage = void 0;\n      if (snap._loopX) {\n        currentPage = extend({}, this.currentPage, {\n          pageX: this.currentPage.pageX - 1\n        });\n      } else {\n        currentPage = extend({}, this.currentPage, {\n          pageY: this.currentPage.pageY - 1\n        });\n      }\n      return currentPage;\n    }\n    return this.currentPage;\n  };\n}\n\nfunction wheelMixin(BScroll) {\n  BScroll.prototype.wheelTo = function () {\n    var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (this.options.wheel) {\n      this.y = -index * this.itemHeight;\n      this.scrollTo(0, this.y);\n    }\n  };\n\n  BScroll.prototype.getSelectedIndex = function () {\n    return this.options.wheel && this.selectedIndex;\n  };\n\n  BScroll.prototype._initWheel = function () {\n    var wheel = this.options.wheel;\n    if (!wheel.wheelWrapperClass) {\n      wheel.wheelWrapperClass = 'wheel-scroll';\n    }\n    if (!wheel.wheelItemClass) {\n      wheel.wheelItemClass = 'wheel-item';\n    }\n    if (wheel.selectedIndex === undefined) {\n      wheel.selectedIndex = 0;\n      warn('wheel option selectedIndex is required!');\n    }\n  };\n}\n\nvar INDICATOR_MIN_LEN = 8;\n\nfunction scrollbarMixin(BScroll) {\n  BScroll.prototype._initScrollbar = function () {\n    var _this = this;\n\n    var _options$scrollbar = this.options.scrollbar,\n        _options$scrollbar$fa = _options$scrollbar.fade,\n        fade = _options$scrollbar$fa === undefined ? true : _options$scrollbar$fa,\n        _options$scrollbar$in = _options$scrollbar.interactive,\n        interactive = _options$scrollbar$in === undefined ? false : _options$scrollbar$in;\n\n    this.indicators = [];\n    var indicator = void 0;\n\n    if (this.options.scrollX) {\n      indicator = {\n        el: createScrollbar('horizontal'),\n        direction: 'horizontal',\n        fade: fade,\n        interactive: interactive\n      };\n      this._insertScrollBar(indicator.el);\n\n      this.indicators.push(new Indicator(this, indicator));\n    }\n\n    if (this.options.scrollY) {\n      indicator = {\n        el: createScrollbar('vertical'),\n        direction: 'vertical',\n        fade: fade,\n        interactive: interactive\n      };\n      this._insertScrollBar(indicator.el);\n      this.indicators.push(new Indicator(this, indicator));\n    }\n\n    this.on('refresh', function () {\n      for (var i = 0; i < _this.indicators.length; i++) {\n        _this.indicators[i].refresh();\n      }\n    });\n\n    if (fade) {\n      this.on('scrollEnd', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade();\n        }\n      });\n\n      this.on('scrollCancel', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade();\n        }\n      });\n\n      this.on('scrollStart', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade(true);\n        }\n      });\n\n      this.on('beforeScrollStart', function () {\n        for (var i = 0; i < _this.indicators.length; i++) {\n          _this.indicators[i].fade(true, true);\n        }\n      });\n    }\n\n    this.on('destroy', function () {\n      _this._removeScrollBars();\n    });\n  };\n\n  BScroll.prototype._insertScrollBar = function (scrollbar) {\n    this.wrapper.appendChild(scrollbar);\n  };\n\n  BScroll.prototype._removeScrollBars = function () {\n    for (var i = 0; i < this.indicators.length; i++) {\n      this.indicators[i].destroy();\n    }\n  };\n}\n\nfunction createScrollbar(direction) {\n  var scrollbar = document.createElement('div');\n  var indicator = document.createElement('div');\n\n  scrollbar.style.cssText = 'position:absolute;z-index:9999;pointerEvents:none';\n  indicator.style.cssText = 'box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;';\n\n  indicator.className = 'bscroll-indicator';\n\n  if (direction === 'horizontal') {\n    scrollbar.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\n    indicator.style.height = '100%';\n    scrollbar.className = 'bscroll-horizontal-scrollbar';\n  } else {\n    scrollbar.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\n    indicator.style.width = '100%';\n    scrollbar.className = 'bscroll-vertical-scrollbar';\n  }\n\n  scrollbar.style.cssText += ';overflow:hidden';\n  scrollbar.appendChild(indicator);\n\n  return scrollbar;\n}\n\nfunction Indicator(scroller, options) {\n  this.wrapper = options.el;\n  this.wrapperStyle = this.wrapper.style;\n  this.indicator = this.wrapper.children[0];\n  this.indicatorStyle = this.indicator.style;\n  this.scroller = scroller;\n  this.direction = options.direction;\n  if (options.fade) {\n    this.visible = 0;\n    this.wrapperStyle.opacity = '0';\n  } else {\n    this.visible = 1;\n  }\n\n  this.sizeRatioX = 1;\n  this.sizeRatioY = 1;\n  this.maxPosX = 0;\n  this.maxPosY = 0;\n  this.x = 0;\n  this.y = 0;\n\n  if (options.interactive) {\n    this._addDOMEvents();\n  }\n}\n\nIndicator.prototype.handleEvent = function (e) {\n  switch (e.type) {\n    case 'touchstart':\n    case 'mousedown':\n      this._start(e);\n      break;\n    case 'touchmove':\n    case 'mousemove':\n      this._move(e);\n      break;\n    case 'touchend':\n    case 'mouseup':\n    case 'touchcancel':\n    case 'mousecancel':\n      this._end(e);\n      break;\n  }\n};\n\nIndicator.prototype.refresh = function () {\n  if (this._shouldShow()) {\n    this.transitionTime();\n    this._calculate();\n    this.updatePosition();\n  }\n};\n\nIndicator.prototype.fade = function (visible, hold) {\n  var _this2 = this;\n\n  if (hold && !this.visible) {\n    return;\n  }\n\n  var time = visible ? 250 : 500;\n\n  visible = visible ? '1' : '0';\n\n  this.wrapperStyle[style.transitionDuration] = time + 'ms';\n\n  clearTimeout(this.fadeTimeout);\n  this.fadeTimeout = setTimeout(function () {\n    _this2.wrapperStyle.opacity = visible;\n    _this2.visible = +visible;\n  }, 0);\n};\n\nIndicator.prototype.updatePosition = function () {\n  if (this.direction === 'vertical') {\n    var y = Math.round(this.sizeRatioY * this.scroller.y);\n\n    if (y < 0) {\n      this.transitionTime(500);\n      var height = Math.max(this.indicatorHeight + y * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.height = height + 'px';\n      y = 0;\n    } else if (y > this.maxPosY) {\n      this.transitionTime(500);\n      var _height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.height = _height + 'px';\n      y = this.maxPosY + this.indicatorHeight - _height;\n    } else {\n      this.indicatorStyle.height = this.indicatorHeight + 'px';\n    }\n    this.y = y;\n\n    if (this.scroller.options.useTransform) {\n      this.indicatorStyle[style.transform] = 'translateY(' + y + 'px)' + this.scroller.translateZ;\n    } else {\n      this.indicatorStyle.top = y + 'px';\n    }\n  } else {\n    var x = Math.round(this.sizeRatioX * this.scroller.x);\n\n    if (x < 0) {\n      this.transitionTime(500);\n      var width = Math.max(this.indicatorWidth + x * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.width = width + 'px';\n      x = 0;\n    } else if (x > this.maxPosX) {\n      this.transitionTime(500);\n      var _width = Math.max(this.indicatorWidth - (x - this.maxPosX) * 3, INDICATOR_MIN_LEN);\n      this.indicatorStyle.width = _width + 'px';\n      x = this.maxPosX + this.indicatorWidth - _width;\n    } else {\n      this.indicatorStyle.width = this.indicatorWidth + 'px';\n    }\n\n    this.x = x;\n\n    if (this.scroller.options.useTransform) {\n      this.indicatorStyle[style.transform] = 'translateX(' + x + 'px)' + this.scroller.translateZ;\n    } else {\n      this.indicatorStyle.left = x + 'px';\n    }\n  }\n};\n\nIndicator.prototype.transitionTime = function () {\n  var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n  this.indicatorStyle[style.transitionDuration] = time + 'ms';\n};\n\nIndicator.prototype.transitionTimingFunction = function (easing) {\n  this.indicatorStyle[style.transitionTimingFunction] = easing;\n};\n\nIndicator.prototype.destroy = function () {\n  this._removeDOMEvents();\n  this.wrapper.parentNode.removeChild(this.wrapper);\n};\n\nIndicator.prototype._start = function (e) {\n  var point = e.touches ? e.touches[0] : e;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  this.transitionTime();\n\n  this.initiated = true;\n  this.moved = false;\n  this.lastPointX = point.pageX;\n  this.lastPointY = point.pageY;\n\n  this.startTime = getNow();\n\n  this._handleMoveEvents(addEvent);\n  this.scroller.trigger('beforeScrollStart');\n};\n\nIndicator.prototype._move = function (e) {\n  var point = e.touches ? e.touches[0] : e;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  if (!this.moved) {\n    this.scroller.trigger('scrollStart');\n  }\n\n  this.moved = true;\n\n  var deltaX = point.pageX - this.lastPointX;\n  this.lastPointX = point.pageX;\n\n  var deltaY = point.pageY - this.lastPointY;\n  this.lastPointY = point.pageY;\n\n  var newX = this.x + deltaX;\n  var newY = this.y + deltaY;\n\n  this._pos(newX, newY);\n};\n\nIndicator.prototype._end = function (e) {\n  if (!this.initiated) {\n    return;\n  }\n  this.initiated = false;\n\n  e.preventDefault();\n  e.stopPropagation();\n\n  this._handleMoveEvents(removeEvent);\n\n  var snapOption = this.scroller.options.snap;\n  if (snapOption) {\n    var speed = snapOption.speed,\n        _snapOption$easing = snapOption.easing,\n        easing = _snapOption$easing === undefined ? ease.bounce : _snapOption$easing;\n\n    var snap = this.scroller._nearestSnap(this.scroller.x, this.scroller.y);\n\n    var time = speed || Math.max(Math.max(Math.min(Math.abs(this.scroller.x - snap.x), 1000), Math.min(Math.abs(this.scroller.y - snap.y), 1000)), 300);\n\n    if (this.scroller.x !== snap.x || this.scroller.y !== snap.y) {\n      this.scroller.directionX = 0;\n      this.scroller.directionY = 0;\n      this.scroller.currentPage = snap;\n      this.scroller.scrollTo(snap.x, snap.y, time, easing);\n    }\n  }\n\n  if (this.moved) {\n    this.scroller.trigger('scrollEnd', {\n      x: this.scroller.x,\n      y: this.scroller.y\n    });\n  }\n};\n\nIndicator.prototype._pos = function (x, y) {\n  if (x < 0) {\n    x = 0;\n  } else if (x > this.maxPosX) {\n    x = this.maxPosX;\n  }\n\n  if (y < 0) {\n    y = 0;\n  } else if (y > this.maxPosY) {\n    y = this.maxPosY;\n  }\n\n  x = Math.round(x / this.sizeRatioX);\n  y = Math.round(y / this.sizeRatioY);\n\n  this.scroller.scrollTo(x, y);\n  this.scroller.trigger('scroll', {\n    x: this.scroller.x,\n    y: this.scroller.y\n  });\n};\n\nIndicator.prototype._shouldShow = function () {\n  if (this.direction === 'vertical' && this.scroller.hasVerticalScroll || this.direction === 'horizontal' && this.scroller.hasHorizontalScroll) {\n    this.wrapper.style.display = '';\n    return true;\n  }\n  this.wrapper.style.display = 'none';\n  return false;\n};\n\nIndicator.prototype._calculate = function () {\n  if (this.direction === 'vertical') {\n    var wrapperHeight = this.wrapper.clientHeight;\n    this.indicatorHeight = Math.max(Math.round(wrapperHeight * wrapperHeight / (this.scroller.scrollerHeight || wrapperHeight || 1)), INDICATOR_MIN_LEN);\n    this.indicatorStyle.height = this.indicatorHeight + 'px';\n\n    this.maxPosY = wrapperHeight - this.indicatorHeight;\n\n    this.sizeRatioY = this.maxPosY / this.scroller.maxScrollY;\n  } else {\n    var wrapperWidth = this.wrapper.clientWidth;\n    this.indicatorWidth = Math.max(Math.round(wrapperWidth * wrapperWidth / (this.scroller.scrollerWidth || wrapperWidth || 1)), INDICATOR_MIN_LEN);\n    this.indicatorStyle.width = this.indicatorWidth + 'px';\n\n    this.maxPosX = wrapperWidth - this.indicatorWidth;\n\n    this.sizeRatioX = this.maxPosX / this.scroller.maxScrollX;\n  }\n};\n\nIndicator.prototype._addDOMEvents = function () {\n  var eventOperation = addEvent;\n  this._handleDOMEvents(eventOperation);\n};\n\nIndicator.prototype._removeDOMEvents = function () {\n  var eventOperation = removeEvent;\n  this._handleDOMEvents(eventOperation);\n  this._handleMoveEvents(eventOperation);\n};\n\nIndicator.prototype._handleMoveEvents = function (eventOperation) {\n  if (!this.scroller.options.disableTouch) {\n    eventOperation(window, 'touchmove', this);\n  }\n  if (!this.scroller.options.disableMouse) {\n    eventOperation(window, 'mousemove', this);\n  }\n};\n\nIndicator.prototype._handleDOMEvents = function (eventOperation) {\n  if (!this.scroller.options.disableTouch) {\n    eventOperation(this.indicator, 'touchstart', this);\n    eventOperation(window, 'touchend', this);\n  }\n  if (!this.scroller.options.disableMouse) {\n    eventOperation(this.indicator, 'mousedown', this);\n    eventOperation(window, 'mouseup', this);\n  }\n};\n\nfunction pullDownMixin(BScroll) {\n  BScroll.prototype._initPullDown = function () {\n    // must watch scroll in real time\n    this.options.probeType = PROBE_REALTIME;\n  };\n\n  BScroll.prototype._checkPullDown = function () {\n    var _options$pullDownRefr = this.options.pullDownRefresh,\n        _options$pullDownRefr2 = _options$pullDownRefr.threshold,\n        threshold = _options$pullDownRefr2 === undefined ? 90 : _options$pullDownRefr2,\n        _options$pullDownRefr3 = _options$pullDownRefr.stop,\n        stop = _options$pullDownRefr3 === undefined ? 40 : _options$pullDownRefr3;\n\n    // check if a real pull down action\n\n    if (this.directionY !== DIRECTION_DOWN || this.y < threshold) {\n      return false;\n    }\n\n    if (!this.pulling) {\n      this.pulling = true;\n      this.trigger('pullingDown');\n    }\n    this.scrollTo(this.x, stop, this.options.bounceTime, ease.bounce);\n\n    return this.pulling;\n  };\n\n  BScroll.prototype.finishPullDown = function () {\n    this.pulling = false;\n    this.resetPosition(this.options.bounceTime, ease.bounce);\n  };\n\n  BScroll.prototype.openPullDown = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this.options.pullDownRefresh = config;\n    this._initPullDown();\n  };\n\n  BScroll.prototype.closePullDown = function () {\n    this.options.pullDownRefresh = false;\n  };\n}\n\nfunction pullUpMixin(BScroll) {\n  BScroll.prototype._initPullUp = function () {\n    // must watch scroll in real time\n    this.options.probeType = PROBE_REALTIME;\n\n    this.pullupWatching = false;\n    this._watchPullUp();\n  };\n\n  BScroll.prototype._watchPullUp = function () {\n    if (this.pullupWatching) {\n      return;\n    }\n    this.pullupWatching = true;\n    this.on('scroll', this._checkToEnd);\n  };\n\n  BScroll.prototype._checkToEnd = function (pos) {\n    var _this = this;\n\n    var _options$pullUpLoad$t = this.options.pullUpLoad.threshold,\n        threshold = _options$pullUpLoad$t === undefined ? 0 : _options$pullUpLoad$t;\n\n    if (this.movingDirectionY === DIRECTION_UP && pos.y <= this.maxScrollY + threshold) {\n      // reset pullupWatching status after scroll end.\n      this.once('scrollEnd', function () {\n        _this.pullupWatching = false;\n      });\n      this.trigger('pullingUp');\n      this.off('scroll', this._checkToEnd);\n    }\n  };\n\n  BScroll.prototype.finishPullUp = function () {\n    var _this2 = this;\n\n    if (this.pullupWatching) {\n      this.once('scrollEnd', function () {\n        _this2._watchPullUp();\n      });\n    } else {\n      this._watchPullUp();\n    }\n  };\n\n  BScroll.prototype.openPullUp = function () {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this.options.pullUpLoad = config;\n    this._initPullUp();\n  };\n\n  BScroll.prototype.closePullUp = function () {\n    this.options.pullUpLoad = false;\n    if (!this.pullupWatching) {\n      return;\n    }\n    this.pullupWatching = false;\n    this.off('scroll', this._checkToEnd);\n  };\n}\n\nfunction mouseWheelMixin(BScroll) {\n  BScroll.prototype._initMouseWheel = function () {\n    var _this = this;\n\n    this._handleMouseWheelEvent(addEvent);\n\n    this.on('destroy', function () {\n      clearTimeout(_this.mouseWheelTimer);\n      clearTimeout(_this.mouseWheelEndTimer);\n      _this._handleMouseWheelEvent(removeEvent);\n    });\n\n    this.firstWheelOpreation = true;\n  };\n\n  BScroll.prototype._handleMouseWheelEvent = function (eventOperation) {\n    eventOperation(this.wrapper, 'wheel', this);\n    eventOperation(this.wrapper, 'mousewheel', this);\n    eventOperation(this.wrapper, 'DOMMouseScroll', this);\n  };\n\n  BScroll.prototype._onMouseWheel = function (e) {\n    var _this2 = this;\n\n    if (!this.enabled) {\n      return;\n    }\n    e.preventDefault();\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    if (this.firstWheelOpreation) {\n      this.trigger('scrollStart');\n    }\n    this.firstWheelOpreation = false;\n\n    var _options$mouseWheel = this.options.mouseWheel,\n        _options$mouseWheel$s = _options$mouseWheel.speed,\n        speed = _options$mouseWheel$s === undefined ? 20 : _options$mouseWheel$s,\n        _options$mouseWheel$i = _options$mouseWheel.invert,\n        invert = _options$mouseWheel$i === undefined ? false : _options$mouseWheel$i,\n        _options$mouseWheel$e = _options$mouseWheel.easeTime,\n        easeTime = _options$mouseWheel$e === undefined ? 300 : _options$mouseWheel$e;\n\n\n    clearTimeout(this.mouseWheelTimer);\n    this.mouseWheelTimer = setTimeout(function () {\n      if (!_this2.options.snap && !easeTime) {\n        _this2.trigger('scrollEnd', {\n          x: _this2.x,\n          y: _this2.y\n        });\n      }\n      _this2.firstWheelOpreation = true;\n    }, 400);\n\n    var wheelDeltaX = void 0;\n    var wheelDeltaY = void 0;\n\n    switch (true) {\n      case 'deltaX' in e:\n        if (e.deltaMode === 1) {\n          wheelDeltaX = -e.deltaX * speed;\n          wheelDeltaY = -e.deltaY * speed;\n        } else {\n          wheelDeltaX = -e.deltaX;\n          wheelDeltaY = -e.deltaY;\n        }\n        break;\n      case 'wheelDeltaX' in e:\n        wheelDeltaX = e.wheelDeltaX / 120 * speed;\n        wheelDeltaY = e.wheelDeltaY / 120 * speed;\n        break;\n      case 'wheelDelta' in e:\n        wheelDeltaX = wheelDeltaY = e.wheelDelta / 120 * speed;\n        break;\n      case 'detail' in e:\n        wheelDeltaX = wheelDeltaY = -e.detail / 3 * speed;\n        break;\n      default:\n        return;\n    }\n\n    var direction = invert ? -1 : 1;\n    wheelDeltaX *= direction;\n    wheelDeltaY *= direction;\n\n    if (!this.hasVerticalScroll) {\n      wheelDeltaX = wheelDeltaY;\n      wheelDeltaY = 0;\n    }\n\n    var newX = void 0;\n    var newY = void 0;\n    if (this.options.snap) {\n      newX = this.currentPage.pageX;\n      newY = this.currentPage.pageY;\n\n      if (wheelDeltaX > 0) {\n        newX--;\n      } else if (wheelDeltaX < 0) {\n        newX++;\n      }\n\n      if (wheelDeltaY > 0) {\n        newY--;\n      } else if (wheelDeltaY < 0) {\n        newY++;\n      }\n\n      this._goToPage(newX, newY);\n      return;\n    }\n\n    newX = this.x + Math.round(this.hasHorizontalScroll ? wheelDeltaX : 0);\n    newY = this.y + Math.round(this.hasVerticalScroll ? wheelDeltaY : 0);\n\n    this.movingDirectionX = this.directionX = wheelDeltaX > 0 ? -1 : wheelDeltaX < 0 ? 1 : 0;\n    this.movingDirectionY = this.directionY = wheelDeltaY > 0 ? -1 : wheelDeltaY < 0 ? 1 : 0;\n\n    if (newX > this.minScrollX) {\n      newX = this.minScrollX;\n    } else if (newX < this.maxScrollX) {\n      newX = this.maxScrollX;\n    }\n\n    if (newY > this.minScrollY) {\n      newY = this.minScrollY;\n    } else if (newY < this.maxScrollY) {\n      newY = this.maxScrollY;\n    }\n\n    var needTriggerEnd = this.y === newY;\n    this.scrollTo(newX, newY, easeTime, ease.swipe);\n    this.trigger('scroll', {\n      x: this.x,\n      y: this.y\n    });\n    clearTimeout(this.mouseWheelEndTimer);\n    if (needTriggerEnd) {\n      this.mouseWheelEndTimer = setTimeout(function () {\n        _this2.trigger('scrollEnd', {\n          x: _this2.x,\n          y: _this2.y\n        });\n      }, easeTime);\n    }\n  };\n}\n\nfunction zoomMixin(BScroll) {\n  BScroll.prototype._initZoom = function () {\n    var _options$zoom = this.options.zoom,\n        _options$zoom$start = _options$zoom.start,\n        start = _options$zoom$start === undefined ? 1 : _options$zoom$start,\n        _options$zoom$min = _options$zoom.min,\n        min = _options$zoom$min === undefined ? 1 : _options$zoom$min,\n        _options$zoom$max = _options$zoom.max,\n        max = _options$zoom$max === undefined ? 4 : _options$zoom$max;\n\n    this.scale = Math.min(Math.max(start, min), max);\n    this.setScale(this.scale);\n    this.scrollerStyle[style.transformOrigin] = '0 0';\n  };\n\n  BScroll.prototype._zoomTo = function (scale, originX, originY, startScale) {\n    this.scaled = true;\n\n    var lastScale = scale / (startScale || this.scale);\n    this.setScale(scale);\n\n    this.refresh();\n\n    var newX = Math.round(this.startX - (originX - this.relativeX) * (lastScale - 1));\n    var newY = Math.round(this.startY - (originY - this.relativeY) * (lastScale - 1));\n\n    if (newX > this.minScrollX) {\n      newX = this.minScrollX;\n    } else if (newX < this.maxScrollX) {\n      newX = this.maxScrollX;\n    }\n\n    if (newY > this.minScrollY) {\n      newY = this.minScrollY;\n    } else if (newY < this.maxScrollY) {\n      newY = this.maxScrollY;\n    }\n\n    if (this.x !== newX || this.y !== newY) {\n      this.scrollTo(newX, newY, this.options.bounceTime);\n    }\n\n    this.scaled = false;\n  };\n\n  BScroll.prototype.zoomTo = function (scale, x, y) {\n    var _offsetToBody = offsetToBody(this.wrapper),\n        left = _offsetToBody.left,\n        top = _offsetToBody.top;\n\n    var originX = x + left - this.x;\n    var originY = y + top - this.y;\n    this._zoomTo(scale, originX, originY);\n  };\n\n  BScroll.prototype._zoomStart = function (e) {\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n\n    this.startDistance = getDistance(deltaX, deltaY);\n    this.startScale = this.scale;\n\n    var _offsetToBody2 = offsetToBody(this.wrapper),\n        left = _offsetToBody2.left,\n        top = _offsetToBody2.top;\n\n    this.originX = Math.abs(firstFinger.pageX + secondFinger.pageX) / 2 + left - this.x;\n    this.originY = Math.abs(firstFinger.pageY + secondFinger.pageY) / 2 + top - this.y;\n\n    this.trigger('zoomStart');\n  };\n\n  BScroll.prototype._zoom = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    var firstFinger = e.touches[0];\n    var secondFinger = e.touches[1];\n    var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\n    var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\n    var distance = getDistance(deltaX, deltaY);\n    var scale = distance / this.startDistance * this.startScale;\n\n    this.scaled = true;\n\n    var _options$zoom2 = this.options.zoom,\n        _options$zoom2$min = _options$zoom2.min,\n        min = _options$zoom2$min === undefined ? 1 : _options$zoom2$min,\n        _options$zoom2$max = _options$zoom2.max,\n        max = _options$zoom2$max === undefined ? 4 : _options$zoom2$max;\n\n\n    if (scale < min) {\n      scale = 0.5 * min * Math.pow(2.0, scale / min);\n    } else if (scale > max) {\n      scale = 2.0 * max * Math.pow(0.5, max / scale);\n    }\n\n    var lastScale = scale / this.startScale;\n\n    var x = this.startX - (this.originX - this.relativeX) * (lastScale - 1);\n    var y = this.startY - (this.originY - this.relativeY) * (lastScale - 1);\n\n    this.setScale(scale);\n\n    this.scrollTo(x, y, 0);\n  };\n\n  BScroll.prototype._zoomEnd = function (e) {\n    if (!this.enabled || this.destroyed || eventType[e.type] !== this.initiated) {\n      return;\n    }\n\n    if (this.options.preventDefault) {\n      e.preventDefault();\n    }\n\n    if (this.options.stopPropagation) {\n      e.stopPropagation();\n    }\n\n    this.isInTransition = false;\n    this.isAnimating = false;\n    this.initiated = 0;\n\n    var _options$zoom3 = this.options.zoom,\n        _options$zoom3$min = _options$zoom3.min,\n        min = _options$zoom3$min === undefined ? 1 : _options$zoom3$min,\n        _options$zoom3$max = _options$zoom3.max,\n        max = _options$zoom3$max === undefined ? 4 : _options$zoom3$max;\n\n\n    var scale = this.scale > max ? max : this.scale < min ? min : this.scale;\n\n    this._zoomTo(scale, this.originX, this.originY, this.startScale);\n\n    this.trigger('zoomEnd');\n  };\n}\n\n// import { ease } from '../util/ease'\n\n// Number of items to instantiate beyond current view in the scroll direction.\nvar RUNWAY_ITEMS = 30;\n\n// Number of items to instantiate beyond current view in the opposite direction.\nvar RUNWAY_ITEMS_OPPOSITE = 10;\n\n// The animation interval (in ms) for fading in content from tombstones.\nvar ANIMATION_DURATION_MS = 200;\n\n// The number of pixels of default additional length to allow scrolling to.\nvar DEFAULT_SCROLL_RUNWAY = 2000;\n\nfunction infiniteMixin(BScroll) {\n  BScroll.prototype._initInfinite = function () {\n    this.options.probeType = 3;\n    this.maxScrollY = -DEFAULT_SCROLL_RUNWAY;\n    this.infiniteScroller = new InfiniteScroller(this, this.options.infinity);\n  };\n}\n\nfunction isTombstoneNode(node) {\n  if (node && node.classList) {\n    return node.classList.contains('tombstone');\n  }\n}\n\nfunction InfiniteScroller(scroller, options) {\n  var _this = this;\n\n  this.options = options;\n  assert(typeof this.options.createTombstone === 'function', 'Infinite scroll need createTombstone Function to create tombstone');\n\n  assert(typeof this.options.fetch === 'function', 'Infinite scroll need fetch Function to fetch new data.');\n\n  assert(typeof this.options.render === 'function', 'Infinite scroll need render Function to render each item.');\n\n  this.firstAttachedItem = 0;\n  this.lastAttachedItem = 0;\n\n  this.anchorScrollTop = 0;\n  this.anchorItem = {\n    index: 0,\n    offset: 0\n  };\n  this.tombstoneHeight = 0;\n  this.tombstoneWidth = 0;\n  this.tombstones = [];\n  this.tombstonesAnimationHandlers = [];\n\n  this.items = [];\n  this.loadedItems = 0;\n  this.requestInProgress = false;\n  this.hasMore = true;\n\n  this.scroller = scroller;\n  this.wrapperEl = this.scroller.wrapper;\n  this.scrollerEl = this.scroller.scroller;\n  this.scroller.on('scroll', function () {\n    _this.onScroll();\n  });\n  this.scroller.on('resize', function () {\n    _this.onResize();\n  });\n  this.scroller.on('destroy', function () {\n    _this.destroy();\n  });\n\n  // wait scroll core init\n  this._onResizeHandler = setTimeout(function () {\n    _this.onResize();\n  });\n}\n\nInfiniteScroller.prototype.destroy = function () {\n  var _this2 = this;\n\n  // In extreme scene, destroy is triggered before _onResizeHandler\n  clearTimeout(this._onResizeHandler);\n  this.tombstonesAnimationHandlers.forEach(function (handler) {\n    clearTimeout(handler);\n  });\n  this.tombstonesAnimationHandlers = null;\n  this.items.forEach(function (item) {\n    if (item.node) {\n      _this2.scrollerEl.removeChild(item.node);\n      item.node = null;\n    }\n  });\n  this.scroller.infiniteScroller = null;\n  this.scroller = null;\n  this.wrapperEl = null;\n  this.scrollerEl = null;\n  this.items = null;\n  this.tombstones = null;\n};\n\nInfiniteScroller.prototype.onScroll = function () {\n  var scrollTop = -this.scroller.y;\n  var delta = scrollTop - this.anchorScrollTop;\n  if (scrollTop === 0) {\n    this.anchorItem = {\n      index: 0,\n      offset: 0\n    };\n  } else {\n    this.anchorItem = this._calculateAnchoredItem(this.anchorItem, delta);\n  }\n\n  this.anchorScrollTop = scrollTop;\n  var lastScreenItem = this._calculateAnchoredItem(this.anchorItem, this.scroller.wrapperHeight);\n\n  var start = this.anchorItem.index;\n  var end = lastScreenItem.index;\n  if (delta < 0) {\n    start -= RUNWAY_ITEMS;\n    end += RUNWAY_ITEMS_OPPOSITE;\n  } else {\n    start -= RUNWAY_ITEMS_OPPOSITE;\n    end += RUNWAY_ITEMS;\n  }\n  this.fill(start, end);\n  this.maybeRequestContent();\n};\n\nInfiniteScroller.prototype.onResize = function () {\n  var tombstone = this.options.createTombstone();\n  tombstone.style.position = 'absolute';\n  this.scrollerEl.appendChild(tombstone);\n  tombstone.style.display = '';\n  this.tombstoneHeight = tombstone.offsetHeight;\n  this.tombstoneWidth = tombstone.offsetWidth;\n  this.scrollerEl.removeChild(tombstone);\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.items[i].height = this.items[i].width = 0;\n  }\n\n  this.onScroll();\n};\n\nInfiniteScroller.prototype.fill = function (start, end) {\n  this.firstAttachedItem = Math.max(0, start);\n  if (!this.hasMore) {\n    end = Math.min(end, this.items.length);\n  }\n  this.lastAttachedItem = end;\n  this.attachContent();\n};\n\nInfiniteScroller.prototype.maybeRequestContent = function () {\n  var _this3 = this;\n\n  if (this.requestInProgress || !this.hasMore) {\n    return;\n  }\n  var itemsNeeded = this.lastAttachedItem - this.loadedItems;\n  if (itemsNeeded <= 0) {\n    return;\n  }\n  this.requestInProgress = true;\n  this.options.fetch(itemsNeeded).then(function (items) {\n    _this3.requestInProgress = false;\n    if (items) {\n      _this3.addContent(items);\n    } else {\n      _this3.hasMore = false;\n      var tombstoneLen = _this3._removeTombstones();\n      var curPos = 0;\n      if (_this3.anchorItem.index <= _this3.items.length) {\n        curPos = _this3._fixScrollPosition();\n        _this3._setupAnimations({}, curPos);\n        _this3.scroller.resetPosition(_this3.scroller.options.bounceTime);\n      } else {\n        _this3.anchorItem.index -= tombstoneLen;\n        curPos = _this3._fixScrollPosition();\n        _this3._setupAnimations({}, curPos);\n        _this3.scroller.stop();\n        _this3.scroller.resetPosition();\n        _this3.onScroll();\n      }\n    }\n  });\n};\n\nInfiniteScroller.prototype.addContent = function (items) {\n  for (var i = 0; i < items.length; i++) {\n    if (this.items.length <= this.loadedItems) {\n      this._addItem();\n    }\n    this.items[this.loadedItems++].data = items[i];\n  }\n  this.attachContent();\n  this.maybeRequestContent();\n};\n\nInfiniteScroller.prototype.attachContent = function () {\n  var unusedNodes = this._collectUnusedNodes();\n  var tombstoneAnimations = this._createDOMNodes(unusedNodes);\n  this._cleanupUnusedNodes(unusedNodes);\n  this._cacheNodeSize();\n  var curPos = this._fixScrollPosition();\n  this._setupAnimations(tombstoneAnimations, curPos);\n};\n\nInfiniteScroller.prototype.resetMore = function () {\n  this.hasMore = true;\n};\n\nInfiniteScroller.prototype._removeTombstones = function () {\n  var markIndex = void 0;\n  var tombstoneLen = 0;\n  var itemLen = this.items.length;\n  for (var i = 0; i < itemLen; i++) {\n    var currentNode = this.items[i].node;\n    var currentData = this.items[i].data;\n    if ((!currentNode || isTombstoneNode(currentNode)) && !currentData) {\n      // 0 should be excluded\n      if (markIndex === void 0) {\n        markIndex = i;\n      }\n      if (currentNode) {\n        this.scrollerEl.removeChild(currentNode);\n      }\n    }\n  }\n  tombstoneLen = itemLen - markIndex;\n  this.items.splice(markIndex);\n  this.lastAttachedItem = Math.min(this.lastAttachedItem, this.items.length);\n  return tombstoneLen;\n};\n\nInfiniteScroller.prototype._collectUnusedNodes = function () {\n  var unusedNodes = [];\n  for (var i = 0; i < this.items.length; i++) {\n    // Skip the items which should be visible.\n    if (i === this.firstAttachedItem) {\n      i = this.lastAttachedItem - 1;\n      continue;\n    }\n    var currentNode = this.items[i].node;\n    if (currentNode) {\n      if (isTombstoneNode(currentNode)) {\n        // Cache tombstones for reuse\n        this.tombstones.push(currentNode);\n        this.tombstones[this.tombstones.length - 1].style.display = 'none';\n      } else {\n        unusedNodes.push(currentNode);\n      }\n    }\n    this.items[i].node = null;\n  }\n  return unusedNodes;\n};\n\nInfiniteScroller.prototype._createDOMNodes = function (unusedNodes) {\n  var tombstoneAnimations = {};\n  for (var i = this.firstAttachedItem; i < this.lastAttachedItem; i++) {\n    while (this.items.length <= i) {\n      this._addItem();\n    }\n    var currentNode = this.items[i].node;\n    var currentData = this.items[i].data;\n    if (currentNode) {\n      if (isTombstoneNode(currentNode) && currentData) {\n        currentNode.style.zIndex = 1;\n        tombstoneAnimations[i] = [currentNode, this.items[i].top - this.anchorScrollTop];\n        this.items[i].node = null;\n      } else {\n        continue;\n      }\n    }\n    var node = currentData ? this.options.render(currentData, unusedNodes.pop()) : this._getTombStone();\n    node.style.position = 'absolute';\n    this.items[i].top = -1;\n    this.scrollerEl.appendChild(node);\n    this.items[i].node = node;\n  }\n  return tombstoneAnimations;\n};\n\nInfiniteScroller.prototype._cleanupUnusedNodes = function (unusedNodes) {\n  while (unusedNodes.length) {\n    this.scrollerEl.removeChild(unusedNodes.pop());\n  }\n};\n\nInfiniteScroller.prototype._cacheNodeSize = function () {\n  for (var i = this.firstAttachedItem; i < this.lastAttachedItem; i++) {\n    var item = this.items[i];\n    // Only cache the height if we have the real contents, not a placeholder.\n    if (item.data && !item.height) {\n      var isTombstone = isTombstoneNode(item.node);\n      item.height = isTombstone ? this.tombstoneHeight : item.node.offsetHeight;\n      item.width = isTombstone ? this.tombstoneWidth : item.node.offsetWidth;\n    }\n  }\n};\n\nInfiniteScroller.prototype._fixScrollPosition = function () {\n  this.anchorScrollTop = 0;\n  for (var _i = 0; _i < this.anchorItem.index; _i++) {\n    this.anchorScrollTop += this.items[_i].height || this.tombstoneHeight;\n  }\n  this.anchorScrollTop += this.anchorItem.offset;\n\n  // Position all nodes.\n  var curPos = this.anchorScrollTop - this.anchorItem.offset;\n  var i = this.anchorItem.index;\n  while (i > this.firstAttachedItem) {\n    curPos -= this.items[i - 1].height || this.tombstoneHeight;\n    i--;\n  }\n\n  return curPos;\n};\n\nInfiniteScroller.prototype._setupAnimations = function (tombstoneAnimations, curPos) {\n  var _this4 = this;\n\n  for (var i in tombstoneAnimations) {\n    var animation = tombstoneAnimations[i];\n    this.items[i].node.style[style.transform] = 'translateY(' + (this.anchorScrollTop + animation[1]) + 'px) scale(' + this.tombstoneWidth / this.items[i].width + ', ' + this.tombstoneHeight / this.items[i].height + ')';\n    // Call offsetTop on the nodes to be animated to force them to apply current transforms.\n    /* eslint-disable no-unused-expressions */\n    this.items[i].node.offsetTop;\n    animation[0].offsetTop;\n    this.items[i].node.style[style.transition] = cssVendor + 'transform ' + ANIMATION_DURATION_MS + 'ms';\n  }\n\n  for (var _i2 = this.firstAttachedItem; _i2 < this.lastAttachedItem; _i2++) {\n    var _animation = tombstoneAnimations[_i2];\n    if (_animation) {\n      var tombstoneNode = _animation[0];\n      tombstoneNode.style[style.transition] = cssVendor + 'transform ' + ANIMATION_DURATION_MS + 'ms, opacity ' + ANIMATION_DURATION_MS + 'ms';\n      tombstoneNode.style[style.transform] = 'translateY(' + curPos + 'px) scale(' + this.items[_i2].width / this.tombstoneWidth + ', ' + this.items[_i2].height / this.tombstoneHeight + ')';\n      tombstoneNode.style.opacity = 0;\n    }\n    if (curPos !== this.items[_i2].top) {\n      if (!_animation) {\n        this.items[_i2].node.style[style.transition] = '';\n      }\n      this.items[_i2].node.style[style.transform] = 'translateY(' + curPos + 'px)';\n    }\n    this.items[_i2].top = curPos;\n    curPos += this.items[_i2].height || this.tombstoneHeight;\n  }\n\n  this.scroller.maxScrollY = -(curPos - this.scroller.wrapperHeight + (this.hasMore ? DEFAULT_SCROLL_RUNWAY : 0));\n\n  var tombstoneAnimationsHandler = setTimeout(function () {\n    for (var _i3 in tombstoneAnimations) {\n      var _animation2 = tombstoneAnimations[_i3];\n      _animation2[0].style.display = 'none';\n      // Tombstone can be recycled now.\n      _this4.tombstones.push(_animation2[0]);\n    }\n  }, ANIMATION_DURATION_MS);\n\n  this.tombstonesAnimationHandlers.push(tombstoneAnimationsHandler);\n};\n\nInfiniteScroller.prototype._getTombStone = function () {\n  var tombstone = this.tombstones.pop();\n  if (tombstone) {\n    tombstone.style.display = '';\n    tombstone.style.opacity = 1;\n    tombstone.style[style.transform] = '';\n    tombstone.style[style.transition] = '';\n    return tombstone;\n  }\n  return this.options.createTombstone();\n};\n\nInfiniteScroller.prototype._addItem = function () {\n  this.items.push({\n    data: null,\n    node: null,\n    height: 0,\n    width: 0,\n    top: 0\n  });\n};\n\nInfiniteScroller.prototype._calculateAnchoredItem = function (initialAnchor, delta) {\n  if (delta === 0) {\n    return initialAnchor;\n  }\n  var i = initialAnchor.index;\n  var tombstones = 0;\n\n  delta += initialAnchor.offset;\n  if (delta < 0) {\n    while (delta < 0 && i > 0 && this.items[i - 1].height) {\n      delta += this.items[i - 1].height;\n      i--;\n    }\n    tombstones = Math.max(-i, Math.ceil(Math.min(delta, 0) / this.tombstoneHeight));\n  } else {\n    while (delta > 0 && i < this.items.length && this.items[i].height && this.items[i].height < delta) {\n      delta -= this.items[i].height;\n      i++;\n    }\n    if (i >= this.items.length || !this.items[i].height) {\n      tombstones = Math.floor(Math.max(delta, 0) / this.tombstoneHeight);\n    }\n  }\n  i += tombstones;\n  delta -= tombstones * this.tombstoneHeight;\n\n  return {\n    index: i,\n    offset: delta\n  };\n};\n\nfunction BScroll(el, options) {\n  this.wrapper = typeof el === 'string' ? document.querySelector(el) : el;\n  if (!this.wrapper) {\n    warn('Can not resolve the wrapper DOM.');\n  }\n  this.scroller = this.wrapper.children[0];\n  if (!this.scroller) {\n    warn('The wrapper need at least one child element to be scroller.');\n  }\n  // cache style for better performance\n  this.scrollerStyle = this.scroller.style;\n\n  this._init(el, options);\n}\n\ninitMixin(BScroll);\ncoreMixin(BScroll);\neventMixin(BScroll);\nsnapMixin(BScroll);\nwheelMixin(BScroll);\nscrollbarMixin(BScroll);\npullDownMixin(BScroll);\npullUpMixin(BScroll);\nmouseWheelMixin(BScroll);\nzoomMixin(BScroll);\ninfiniteMixin(BScroll);\n\nBScroll.Version = '1.13.2';\n\nexport default BScroll;\n","import BScroll from 'better-scroll';\n\nimport mcdonalds from './mcdonalds.pug';\nimport './mcdonalds.scss';\nimport clock from './clock.svg';\nimport clockB from './clock-b.svg';\nimport CountDowner from '../assets/CountDowner.js';\n\nexport const render = () => {\n  setTimeout(start);\n  return mcdonalds;\n};\n\nfunction start() {\n  const scroll = new BScroll('.mcdonalds-wrapper .container', {\n    click: true,\n  });\n\n  const wrapper = document.querySelector('.mcdonalds-wrapper');\n  const couponPage = wrapper.querySelector('.coupon-page');\n  const coupons = wrapper.querySelector('.coupons');\n  const header = wrapper.querySelector('header.coupons-header');\n  const hamburgerIcon = header.querySelector('.hamburger img');\n  const nextHamburgerIcon = header.querySelector('.next-hamburger');\n  const title = header.querySelector('.title-text');\n  const nextTitle = header.querySelector('.next-title-text');\n  const how = header.querySelector('.how-text');\n  const nextHow = header.querySelector('.next-how-text');\n  const hamburger = header.querySelector('.hamburger');\n  const status = coupons.querySelector('.status');\n  const exp = coupons.querySelector('.exp');\n  const couponFooter = couponPage.querySelector('footer');\n  const couponFooterText = couponFooter.querySelector('.exchange');\n\n  status.onclick = handleExchange;\n  function handleExchange(e) {\n    e.preventDefault();\n    openCouponPage();\n  }\n  exp.textContent = setExp();\n  couponFooter.onclick = () => {\n    couponFooter.onclick = () => {};\n    onExchange();\n  };\n  function setExp() {\n    const date = new Date();\n    return `期限：${date.getFullYear()} 年 ${date.getMonth() +\n      1} 月 ${date.getDate() + 3} 日`;\n  }\n  function onExchange() {\n    couponFooter.style.height = '13.5%';\n    couponFooterText.innerHTML = `<img class=\"clock\" src=${clock} alt=\"clock\"/>優惠倒數<span class=\"exchanged-exp\">2:00</span>`;\n    status.className = 'status exchange no-letter-spacing';\n    status.innerHTML = `<img class=\"clock\" src=${clockB} alt=\"clock\"/>優惠倒數<span class=\"exchanged-exp\">2:00</span>`;\n    const expTime = new Date();\n    expTime.setMinutes(expTime.getMinutes() + 2);\n    const countDowner = new CountDowner(expTime);\n    const getLast = countDowner.formatFromCB(\n      timeArray => `${timeArray[2]}:${countDowner.toFixStr(timeArray[3])}`,\n    );\n    countDowner.on('second', function onSecond() {\n      try {\n        const exchangedExps = wrapper.querySelectorAll('.exchanged-exp');\n        Array.from(exchangedExps).forEach(\n          exchangeExp => (exchangeExp.textContent = getLast()),\n        );\n      } catch (e) {\n        countDowner.stop();\n      }\n    });\n    countDowner.on('stop', function onStop() {\n      closeCouponPage();\n      status.onclick = () => {};\n      status.className = 'status';\n      status.textContent = '已兌換';\n    });\n  }\n  function openCouponPage() {\n    hamburgerIcon.style.opacity = '0';\n    nextHamburgerIcon.style.opacity = '100';\n    title.style.transform = `translateX(-200%)`;\n    title.style.opacity = '0';\n    nextTitle.style.transform = `translateX(0%)`;\n    nextTitle.style.opacity = '100';\n    how.style.opacity = '0';\n    nextHow.style.opacity = '100';\n    couponPage.style.transform = 'translateX(0%)';\n    hamburger.onclick = closeCouponPage;\n  }\n  function closeCouponPage() {\n    couponPage.style.transform = 'translateX(100%)';\n    hamburgerIcon.style.opacity = '100';\n    nextHamburgerIcon.style.opacity = '0';\n    title.style.transform = `translateX(0%)`;\n    title.style.opacity = '100';\n    nextTitle.style.transform = `translateX(200%)`;\n    nextTitle.style.opacity = '0';\n    how.style.opacity = '100';\n    nextHow.style.opacity = '0';\n    hamburger.onclick = () => {};\n  }\n}\n"]}