{"version":3,"sources":["src/ubuntu1804/index.js"],"names":["render","_ubuntu","setTimeout","start","wrapper","document","querySelector","password","signIn","cancel","hint","timeModal","loginScreen","submit","key","style","animation","offsetWidth","textContent","value","length","addEventListener","clear","setIdleTimer","idleTimer","clearTimeout","onActive","blur","transform","e","console","log","removeEventListener","focus","timeInterval","setTime","time","date","now","Date","formatDate","getDayStr","getDay","getMonthStr","getMonth","getDate","clearInterval","setInterval","d","split","m","h","getHours","getMinutes"],"mappings":";;;AA2GC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,YAAA,EA3GD,IAAA,EAAA,EAAA,QAAA,qBA2GC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA1GD,QAAA,qBAEO,IAAMA,EAAS,WAEbC,OADPC,WAAWC,GACJF,EAAP,SAGF,SAASE,IACDC,IAAAA,EAAUC,SAASC,cAAc,uBAEjCC,EAAWH,EAAQE,cAAc,aACjCE,EAASJ,EAAQE,cAAc,YAC/BG,EAASL,EAAQE,cAAc,WAC/BI,EAAON,EAAQE,cAAc,SAC7BK,EAAYP,EAAQE,cAAc,0BAClCM,EAAcR,EAAQE,cAAc,+BAKjCO,SAAAA,EAAgB,GAAPC,IAAAA,EAAAA,EAAAA,IACZA,GAAe,UAARA,IACXJ,EAAKK,MAAMC,UAAY,GAElBN,EAAKO,YACVP,EAAKQ,YAAcX,EAASY,MAAMC,OAC9B,kBACA,6BACJV,EAAKK,MAAMC,UAAY,gBAXzBT,EAASc,iBAAiB,UAAWR,GACrCL,EAAOa,iBAAiB,QAASR,GACjCJ,EAAOY,iBAAiB,QAWfC,WACPf,EAASY,MAAQ,KAEnBZ,EAASc,iBAAiB,YAAaE,GACvClB,SAASgB,iBAAiB,UAAWE,GACrCX,EAAYS,iBAAiB,YAAaE,GAEtCC,IAAAA,EAAY,KAEPD,SAAAA,IACPE,aAAaD,GACbA,EAAYtB,WAAW,WACjB,IACFS,EAAUU,iBAAiB,YAAaK,GACxCrB,SAASgB,iBAAiB,UAAWK,GAqBzCnB,EAASoB,OACThB,EAAUI,MAAMa,UAAY,iBApBxB,MAAOC,GACPC,QAAQC,IAAIF,GACZzB,EAAQ4B,oBAAoB,YAAaT,GACzClB,SAAS2B,oBAAoB,UAAWT,GACxCX,EAAYoB,oBAAoB,YAAaT,KAE9C,KAEIG,SAAAA,IACPH,IAcAhB,EAAS0B,QACTtB,EAAUI,MAAMa,UAAY,oBAb5BjB,EAAUqB,oBAAoB,YAAaN,GAC3CrB,SAAS2B,oBAAoB,UAAWN,GApB1CH,IAuBIW,IAAAA,EAAe,KAWVC,SAAAA,IACH,IACIC,IAAAA,EAAOzB,EAAUL,cAAc,SAC/B+B,EAAO1B,EAAUL,cAAc,SAC/BgC,EAAM,IAAIC,KAChBH,EAAKlB,YAAcsB,EAAWF,GAC9BD,EAAKnB,YAAiBuB,GAAAA,OAAAA,EAAUH,EAAII,UAAcC,MAAAA,OAAAA,EAChDL,EAAIM,YACDN,KAAAA,OAAAA,EAAIO,WACT,MAAOhB,GACPC,QAAQC,IAAIF,GACZiB,cAAcZ,IArBlBC,IACAD,EAAea,YAAYZ,EAAS,KAyBtC,SAASM,EAAUO,GACV,MAAA,2DAA2DC,MAAM,KACtED,GAIJ,SAASL,EAAYO,GACZ,MAAA,wFAAwFD,MAC7F,KACAC,GAGJ,SAASV,EAAWQ,GACdG,IAAAA,EAAIH,EAAEI,WACNF,EAAIF,EAAEK,aAGAF,OADVD,GAAKA,EAAI,GAAK,IAAM,IAAMA,EAChBC,GAAAA,OAFVA,GAAKA,EAAI,GAAK,IAAM,IAAMA,EAEXD,KAAAA,OAAAA,GAChB,QAAA,OAAA","file":"ubuntu1804.c9dd0a1d.map","sourceRoot":"..","sourcesContent":["import _ubuntu from './ubuntu1804.pug';\nimport './ubuntu1804.scss';\n\nexport const render = () => {\n  setTimeout(start);\n  return _ubuntu;\n};\n\nfunction start() {\n  const wrapper = document.querySelector('.ubuntu1804-wrapper');\n\n  const password = wrapper.querySelector('#password');\n  const signIn = wrapper.querySelector('#sign-in');\n  const cancel = wrapper.querySelector('#cancel');\n  const hint = wrapper.querySelector('.hint');\n  const timeModal = wrapper.querySelector('.ubuntu1804-time-modal');\n  const loginScreen = wrapper.querySelector('.ubuntu1804-login-container');\n\n  password.addEventListener('keydown', submit);\n  signIn.addEventListener('click', submit);\n  cancel.addEventListener('click', clear);\n  function submit({ key }) {\n    if (key && key !== 'Enter') return;\n    hint.style.animation = '';\n    // a magic for replaying animation\n    void hint.offsetWidth;\n    hint.textContent = password.value.length\n      ? 'Wrong password.'\n      : 'You must enter a password!';\n    hint.style.animation = 'timeout 1.8s';\n  }\n  function clear() {\n    password.value = '';\n  }\n  password.addEventListener('mousemove', setIdleTimer);\n  document.addEventListener('keydown', setIdleTimer);\n  loginScreen.addEventListener('mousedown', setIdleTimer);\n\n  let idleTimer = null;\n  setIdleTimer();\n  function setIdleTimer() {\n    clearTimeout(idleTimer);\n    idleTimer = setTimeout(function() {\n      try {\n        timeModal.addEventListener('mousedown', onActive);\n        document.addEventListener('keydown', onActive);\n        openTimeModal();\n      } catch (e) {\n        console.log(e);\n        wrapper.removeEventListener('mousemove', setIdleTimer);\n        document.removeEventListener('keydown', setIdleTimer);\n        loginScreen.removeEventListener('mousedown', setIdleTimer);\n      }\n    }, 6000);\n  }\n  function onActive() {\n    setIdleTimer();\n    closeTimeModal();\n    timeModal.removeEventListener('mousedown', onActive);\n    document.removeEventListener('keydown', onActive);\n  }\n\n  let timeInterval = null;\n  setTime();\n  timeInterval = setInterval(setTime, 1000);\n  function openTimeModal() {\n    password.blur();\n    timeModal.style.transform = 'translateY(0%)';\n  }\n  function closeTimeModal() {\n    password.focus();\n    timeModal.style.transform = 'translateY(-100%)';\n  }\n  function setTime() {\n    try {\n      const time = timeModal.querySelector('.time');\n      const date = timeModal.querySelector('.date');\n      const now = new Date();\n      time.textContent = formatDate(now);\n      date.textContent = `${getDayStr(now.getDay())}, ${getMonthStr(\n        now.getMonth(),\n      )} ${now.getDate()}`;\n    } catch (e) {\n      console.log(e);\n      clearInterval(timeInterval);\n    }\n  }\n}\n\nfunction getDayStr(d) {\n  return 'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',')[\n    d\n  ];\n}\n\nfunction getMonthStr(m) {\n  return 'January,February,March,April,May,June,July,August,September,October,November,December'.split(\n    ',',\n  )[m];\n}\n\nfunction formatDate(d) {\n  let h = d.getHours();\n  let m = d.getMinutes();\n  h = (h < 10 ? '0' : '') + h;\n  m = (m < 10 ? '0' : '') + m;\n  return `${h}:${m}`;\n}\n"]}